if (self.CavalryLogger) { CavalryLogger.start_js(["RumBn"]); }

__d("SphericalMediaViewportAnimation",["SphericalMediaViewActions","easeInOutInterpolate","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("SphericalMediaViewActions").startAnimating,h=b("SphericalMediaViewActions").stopAnimating,i=b("SphericalMediaViewActions").updateViewportAndFOV,j=1e3;a={moveTo:function(a){__p&&__p();return function(c,d){__p&&__p();var e=d(),f=e.view;if(f.isAnimating)return;c(g());var k=Date.now(),l=a.yaw-f.yaw;Math.abs(l)>180&&(l+=l>0?-360:360);var m=null,n=null,o=null,p=function a(e){__p&&__p();var f=d();f=f.view;if(!f.isAnimating)return;var g=Date.now();if(g-k>j||m!=null&&m!=f.pitch||n!=null&&n!=f.yaw||o!=null&&o!=f.fov){c(h());return}b("requestAnimationFrame")(function(){a(e)});f=b("easeInOutInterpolate")((g-k)/j);g=e.deltaPitch*f+e.startPitch;var l=e.deltaYaw*f+e.startYaw;f=e.deltaFov*f+e.startFov;c(i(l,g,f));m=g;n=l;o=f};b("requestAnimationFrame")(function(){p({startYaw:f.yaw,deltaYaw:l,startPitch:f.pitch,deltaPitch:a.pitch-f.pitch,startFov:f.fov,deltaFov:a.fov-f.fov})})}}};e.exports=a}),null);
__d("SphericalPhotoHeadingIndicator.redux",["FullScreen","ReactRedux","SphericalMediaBaseActions","SphericalMediaHeadingIndicator.react","SphericalMediaViewportAnimation","SphericalPhotoPartialLimits","SphericalPhotoProjectionUtils","SphericalPhotoTypedConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("ReactRedux").connect;var h=b("SphericalMediaBaseActions").tapHeadingIndicator,i=b("SphericalMediaViewportAnimation").moveTo;b("SphericalPhotoPartialLimits").makePartialLimits;d=babelHelpers.inherits(a,b("SphericalMediaHeadingIndicator.react"));g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$SphericalPhotoHeadingIndicator1=function(){this.draw(this.__getDrawData())}.bind(this),b}a.prototype.componentDidMount=function(){g.componentDidMount.call(this),this.props.viewStore.subscribe(this.$SphericalPhotoHeadingIndicator1)};a.prototype.__onClick=function(event){this.props.dispatch(h());var a=this.props.initialFov;if(this.props.showNewPhotoRenderer&&a>179){var c=this.props,d=c.aspectRatio;c=c.partialLimits;c&&(a=b("SphericalPhotoProjectionUtils").getMaxVfov(c,d))}this.props.viewStore.dispatch(i({fov:a,pitch:this.props.initialPitch,yaw:this.props.initialYaw}));event.stopPropagation()};a.prototype.__getDrawData=function(){var a=this.props.viewStore.getState();a=a.view;return{fov:a.fov,initialYaw:this.props.initialYaw,yaw:a.yaw}};a.__subClassMethods={__onClick:!0,__getDrawData:!0};f=function(a){return{aspectRatio:a.base.aspectRatio,initialFov:a.base.initialFov,initialPitch:a.base.initialPitch,initialYaw:a.base.initialYaw,isActive:a.base.isRendererActive&&a.base.isRendererSetup||a.base.showFallbackUI,viewStore:a.base.viewStore,useLargeHeadingIndicator:a.base.useLargeHeadingIndicator||b("FullScreen").isFullScreen(),isPanning:a.base.isPanning,partialLimits:a.base.partialLimits,showNewPhotoRenderer:a.base.tiledSphericalConfig.useTiledRenderer&&b("SphericalPhotoTypedConfig").show_new_renderer}};e.exports=c(f)(a)}),null);