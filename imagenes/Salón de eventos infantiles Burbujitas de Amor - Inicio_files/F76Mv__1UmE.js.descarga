if (self.CavalryLogger) { CavalryLogger.start_js(["oMWXA"]); }

__d("ReactComposerSupportNowActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({INITIALIZE:null,LOAD_ATTACHMENT:null,REMOVE_ATTACHMENT:null},"ReactComposerSupportNowActionType")}),null);
__d("ReactComposerSupportNowActions",["ReactComposerDispatcher","ReactComposerSupportNowActionType"],(function(a,b,c,d,e,f){__p&&__p();a.prototype.initialize=function(a,c){"use strict";a={composerID:a,actorID:c,type:b("ReactComposerSupportNowActionType").INITIALIZE};b("ReactComposerDispatcher").dispatch(a)};a.prototype.loadAttachment=function(a){"use strict";a={composerID:a,type:b("ReactComposerSupportNowActionType").LOAD_ATTACHMENT};b("ReactComposerDispatcher").dispatch(a)};a.prototype.removeAttachment=function(a){"use strict";a={composerID:a,type:b("ReactComposerSupportNowActionType").REMOVE_ATTACHMENT};b("ReactComposerDispatcher").dispatch(a)};function a(){"use strict"}e.exports=new a()}),null);
__d("XReactComposerSupportNowAttachmentBootstrapController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/support_now/bootstrap/",{composer_id:{type:"String",required:!0}})}),null);
__d("ReactComposerSupportNowStore",["ActorURI","AsyncRequest","ReactComposerStoreBase","ReactComposerSupportNowActionType","XReactComposerSupportNowAttachmentBootstrapController"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";__p&&__p();var a;g.constructor.call(this,function(){return{composerID:null,attachmentFetched:!1,isFetching:!1}},function(c){switch(c.type){case b("ReactComposerSupportNowActionType").INITIALIZE:a&&a.$ReactComposerSupportNowStore1(c);break;case b("ReactComposerSupportNowActionType").LOAD_ATTACHMENT:a&&a.$ReactComposerSupportNowStore2(c);break;case b("ReactComposerSupportNowActionType").REMOVE_ATTACHMENT:a&&a.$ReactComposerSupportNowStore3(c);break}});a=this}a.prototype.getAttachmentFetched=function(a){"use strict";return this.getComposerData(a).attachmentFetched};a.prototype.isFetching=function(a){"use strict";return this.getComposerData(a).isFetching};a.prototype.$ReactComposerSupportNowStore1=function(a){"use strict";__p&&__p();a=this.validateAction(a,["composerID","actorID"]);var c=a[0];a=a[1];var d=this.getComposerData(c);d.isFetching=!0;d.composerID=c;var e=b("XReactComposerSupportNowAttachmentBootstrapController").getURIBuilder().setString("composer_id",c);e=b("ActorURI").create(e.getURI(),a);a=new(b("AsyncRequest"))(e).setFinallyHandler(function(){d.isFetching=!1,this.emitChange(c)}.bind(this));a.send();this.emitChange(c)};a.prototype.$ReactComposerSupportNowStore2=function(a){"use strict";a=this.validateAction(a,["composerID"]);var b=this.getComposerData(a);b.attachmentFetched=!0;b.isFetching=!1;b.composerID=a;this.emitChange(a)};a.prototype.$ReactComposerSupportNowStore3=function(a){"use strict";a=this.validateAction(a,["composerID"]);var b=this.getComposerData(a);b.attachmentFetched=!1;b.composerID=a;this.emitChange(a)};e.exports=new a()}),null);
__d("ReactComposerSupportNowAttachmentContainer.react",["cx","fbt","FluxContainer","PageComposerSupportNowCTATaggerBanner.react","React","ReactComposerContextTypes","ReactComposerLoggingName","ReactComposerSupportNowActions","ReactComposerSupportNowStore","ReactComposerTaggerActions","ReactComposerTaggerType","XUISpinner.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={attachmentFetched:!1,isFetching:!1},this.$1=function(){b("ReactComposerTaggerActions").setTaggerData(this.context.composerID,b("ReactComposerLoggingName").SUPPORT_NOW_SPROUT,b("ReactComposerTaggerType").SUPPORT_NOW,{}),b("ReactComposerSupportNowActions").removeAttachment(this.context.composerID)}.bind(this),c}a.getStores=function(){return[b("ReactComposerSupportNowStore")]};a.calculateState=function(a,c,d){return{attachmentFetched:b("ReactComposerSupportNowStore").getAttachmentFetched(d.composerID),isFetching:b("ReactComposerSupportNowStore").isFetching(d.composerID)}};a.prototype.$2=function(){return b("React").createElement("div",{className:"_jg1 _239z"},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"}),h._("Recuperando vista previa"))};a.prototype.render=function(){return this.state.isFetching?this.$2():this.state.attachmentFetched?b("React").createElement("div",{className:"_2ane"},b("React").createElement(b("PageComposerSupportNowCTATaggerBanner.react"),{onCloseButtonClick:this.$1})):null};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);