if (self.CavalryLogger) { CavalryLogger.start_js(["3y+wB"]); }

__d("UFIThreadedFacecastCommentsControls.react",["ix","cx","fbt","Image.react","React","ShimButton.react","UFISharedDispatcher","UFIStoryAction","XUIText.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){var a=this.props.newCommentCount>0?b("React").createElement(b("XUIText.react"),{className:"_zsl",size:"body3",color:"white"},this.props.newCommentCount):null;return b("React").createElement("div",{className:"_6ew3"},b("React").createElement(b("ShimButton.react"),{className:"_6wjz",onClick:function(){return b("UFISharedDispatcher").dispatch(b("UFIStoryAction").hideFacecastReplies(this.props.contextArgs,!0))}.bind(this)},b("React").createElement(b("Image.react"),{className:"_zuf",src:g("499009")}),a),b("React").createElement(b("XUIText.react"),{className:"_zug",size:"body1",color:"placeholder",weight:"bold"},this.props.commentAuthorName!=null?i._("Respondiendo a {name}",[i._param("name",this.props.commentAuthorName)]):i._("Respondiendo al comentario")))};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("UFIThreadedFacecastCommentsControlsContainer.react",["FluxContainer","React","ShortProfiles","SubscriptionsHandler","UFICentralUpdates","UFIComments","UFIThreadedFacecastCommentsControls.react","UFIThreadedFacecastCommentsStore","UFIToplevelStreamedCommentList"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(h,b("React").PureComponent);g&&g.prototype;h.getStores=function(){return[b("UFIThreadedFacecastCommentsStore")]};h.calculateState=function(a,c){var d=b("UFIThreadedFacecastCommentsStore").getCommentID(c.contextArgs.instanceid),e=d!=null?b("UFIComments").getComment(d):null;e=e!=null?b("ShortProfiles").getNow(e.author):null;e=e!=null?(e=e)!=null?e.firstName:e:null;var f=b("UFIToplevelStreamedCommentList").getExistingCommentList(c.contextArgs.ftentidentifier,c.contextArgs.islivestreaming===!0?b("UFIToplevelStreamedCommentList").GLOBAL_ID:c.contextArgs.instanceid);f=f?f.getAddedCommentCountForUnseenCounter():0;var g,h;d=d!=null;a==null||!a.isInReplyMode&&d?(g=f,h=0):(g=a.initialCommentCount,h=f-g>=0?f-g:0);return{isInReplyMode:d,isReplyModeLoaded:b("UFIThreadedFacecastCommentsStore").getIsLoaded(c.contextArgs.instanceid),commentAuthorName:e,initialCommentCount:g,newCommentCount:h}};h.prototype.componentDidMount=function(){this.setupSubscriptions()};h.prototype.componentDidUpdate=function(){this.setupSubscriptions()};h.prototype.componentWillUnmount=function(){this.closeSubscriptions()};h.prototype.setupSubscriptions=function(){this.closeSubscriptions(),this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("UFICentralUpdates").subscribe("comments-updated",function(a){return this.setState(function(a,b){return h.calculateState(a,b)})}.bind(this)))};h.prototype.closeSubscriptions=function(){var a=this.$1;if(a==null)return;a.release();this.$1=null};h.prototype.render=function(){return!this.state.isInReplyMode||!this.state.isReplyModeLoaded?null:b("React").createElement(b("UFIThreadedFacecastCommentsControls.react"),{commentAuthorName:this.state.commentAuthorName,newCommentCount:this.state.newCommentCount,contextArgs:this.props.contextArgs})};function h(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(h,{withProps:!0})}),null);