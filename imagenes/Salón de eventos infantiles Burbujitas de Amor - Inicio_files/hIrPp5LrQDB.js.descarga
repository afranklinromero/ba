if (self.CavalryLogger) { CavalryLogger.start_js(["FV6pq"]); }

__d("Asset3DConstants",[],(function(a,b,c,d,e,f){e.exports={ROTATION_FACTOR:.08,MAX_ZOOM:.25,CAMERA_RADIUS:1,GYRO_SPEED:.06,MODAL:{H_TARGET_FACTOR:{H_PHOTO:-.24,V_PHOTO:-.124},V_TARGET_FACTOR:{H_PHOTO:-.24,V_PHOTO:-.212},H_TARGET_DISTRIBUTE_FACTOR:{H_PHOTO:.7,V_PHOTO:.8},V_TARGET_DISTRIBUTE_FACTOR:{H_PHOTO:.6,V_PHOTO:.86},FOV_FACTOR:.92},POST:{FOV_FACTOR:.925}}}),null);
__d("SocialVRThreeJS",["ThreeJS.r93"],(function(a,b,c,d,e,f){e.exports=b("ThreeJS.r93")}),null);
__d("Tween",["cancelAnimationFrame","requestAnimationFrame"],(function(a,b,c,d,e,f){__p&&__p();a.prototype.start=function(a,c,d){"use strict";__p&&__p();this.$7=a;this.$6=c;this.$8=d||Math.min;this.$3=0;this.$4=Date.now();var e=function(){if(!this.$2){this.$4=Date.now()-this.$3;this.$1=b("requestAnimationFrame")(e);return}this.$3=Date.now()-this.$4;this.$3<this.$6&&(this.$1=b("requestAnimationFrame")(e),this.$7(this.$8(this.$3/this.$6),!1))}.bind(this);this.$1=b("requestAnimationFrame")(e);this.$2=setTimeout(function(){this.$7(this.$8(1),!0)}.bind(this),this.$6)};a.prototype.stop=function(){"use strict";b("cancelAnimationFrame")(this.$1),clearTimeout(this.$2),this.$1=null,this.$2=null};a.prototype.pause=function(){"use strict";this.$2&&(clearTimeout(this.$2),this.$2=null)};a.prototype.resume=function(){"use strict";this.$2||(this.$2=setTimeout(function(){this.$7(this.$8(1),!0)}.bind(this),this.$6-this.$3))};a.scale=function(a,b,c){"use strict";return(b-a)*c+a};function a(){"use strict"}e.exports=a}),null);
__d("AnimatedCameraMotion",["Asset3DConstants","React","SocialVRThreeJS","Tween","WitHelpers"],(function(a,b,c,d,e,f){__p&&__p();var g=b("Asset3DConstants").GYRO_SPEED;b("SocialVRThreeJS").Camera;var h=b("SocialVRThreeJS").Vector3,i=b("WitHelpers").debounce;e.exports={withAnimatedCameraMotion:function(a){__p&&__p();return function(){__p&&__p();var c,d;c=babelHelpers.inherits(e,b("React").Component);d=c&&c.prototype;function e(){var a,c;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return c=(a=d.constructor).call.apply(a,[this].concat(f)),this.state={cameraPos:void 0,lookAtPos:void 0,isAnimating:!1},this.$1=i(function(a,c,d,e){this.__tween&&this.__tween.stop(),this.__tween=new(b("Tween"))(),this.__tween.start(function(b){this.setState({cameraPos:a.map(function(a,d){return a*(1-b)+b*c[d]}),lookAtPos:d.map(function(a,c){return a*(1-b)+b*e[c]}),isAnimating:!0})}.bind(this),16/g-16)}.bind(this),16),c}e.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";__p&&__p();var b=a.toCameraPos,c=a.toLookAtPos;a=a.camera;var d=this.state,e=d.cameraPos;e=e===void 0?a.position.toArray():e;d=d.lookAtPos;a=d===void 0?a.lookAtPosition.toArray():d;if(e&&a&&b&&c){d=e.map(function(a,c){return a+g*(b[c]-a)});var f=a.map(function(a,b){return a+g*(c[b]-a)});this.setState({cameraPos:d,lookAtPos:f,isAnimating:!1})}else this.setState({cameraPos:e,lookAtPos:a,isAnimating:!1})};e.prototype.componentWillUnmount=function(){"use strict";this.__tween&&(this.__tween.stop(),this.__tween=null)};e.prototype.render=function(){"use strict";var c=this.state,d=c.cameraPos,e=c.lookAtPos;c=c.isAnimating;var f=this.props,g=f.camera,i=f.toCameraPos,j=f.toLookAtPos;f=babelHelpers.objectWithoutProperties(f,["camera","toCameraPos","toLookAtPos"]);d&&e&&(!c&&i&&j&&(this.__tween&&this.__tween.stop(),this.$1(d,i,e,j)),g.position.set(d[0],d[1],d[2]),g.lookAt(new h(e[0],e[1],e[2])));return b("React").createElement(a,babelHelpers["extends"]({camera:g},f))};return e}()}}}),null);
__d("R3Scene",["React","SocialVRThreeJS"],(function(a,b,c,d,e,f){__p&&__p();var g=b("SocialVRThreeJS").Scene;e.exports=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("React").Component);c=a&&a.prototype;function d(a){"use strict";c.constructor.call(this,a),this.$1=new g()}d.prototype.componentDidUpdate=function(){"use strict";this.__update()};d.prototype.componentDidMount=function(){"use strict";this.__update()};d.prototype.__update=function(){"use strict";var a=this.props.rendererDelegate;a&&this.$2&&a.requestUpdate(this.$1,this.$2)};d.prototype.$3=function(a){"use strict";this.$2=a};d.prototype.render=function(){"use strict";var a=this.props.children;this.props.children!=null&&(a=b("React").Children.map(a,function(a){return b("React").cloneElement(a,{rendererDelegate:Object.assign({},this.props.rendererDelegate,{requestUpdate:function(){return this.__update()}.bind(this)}),sceneDelegate:{getParentNode:function(){return this.$1}.bind(this),setCamera:function(a){return this.$3(a)}.bind(this)}})}.bind(this)));return b("React").createElement("div",{name:"scene",ref:"sceneElement"},a)};return d}()}),null);
__d("React3",["R3Scene","React","partitionArray"],(function(a,b,c,d,e,f){__p&&__p();var g,h;g=babelHelpers.inherits(i,b("React").Component);h=g&&g.prototype;function i(a){"use strict";h.constructor.call(this,a),this.$1=new Map()}i.prototype.componentDidMount=function(){"use strict";__p&&__p();var a=this.props,b=a.rendererDelegate,c=a.sceneDelegate;a=a.effects;var d=this.__component;if(d!=null&&c!=null&&b!=null){c=c.getParentNode();d=d.element();this.__sceneElement=d;this.__mount(c,d);this.$2(d,a);b.requestUpdate()}};i.prototype.componentDidUpdate=function(){"use strict";this.$3(this.__sceneElement,this.props.effects)};i.prototype.componentWillUnmount=function(){"use strict";__p&&__p();var a=this.props,b=a.rendererDelegate;a=a.sceneDelegate;var c=this.__sceneElement;if(a!=null&&b!=null){a=a.getParentNode();this.__unmount(a,c);Array.from(this.$1).forEach(function(a){a[0];a=a[1];return a.onRemove(c,b)});b.requestUpdate()}};i.prototype.__mount=function(a,b){"use strict";a.add(b)};i.prototype.__unmount=function(a,b){"use strict";a.remove(b)};i.prototype.__getRendererDelegate=function(){"use strict";var a=this.props,b=a.rendererDelegate,c=a.onUpdate,d=this.__sceneElement;return c&&b?Object.assign({},b,{requestUpdate:function(){c(d),b.requestUpdate()}}):b};i.prototype.__delegateChildren=function(a){"use strict";return b("React").Children.map(a,function(a){return b("React").cloneElement(a,{sceneDelegate:Object.assign({},this.props.sceneDelegate,{getParentNode:function(){return this.__sceneElement}.bind(this)}),rendererDelegate:this.__getRendererDelegate()})}.bind(this))};i.prototype.$2=function(a,b){b===void 0&&(b=[]);b=b||[];var c=this.__getRendererDelegate();c&&(b.forEach(function(b){return b.onApply(a,c)}),this.$1=new Map(b.map(function(a){return[a.getKey(),a]})))};i.prototype.$3=function(a,c){__p&&__p();c===void 0&&(c=[]);var d=new Map(c.map(function(a){return[a.getKey(),a]}));c=b("partitionArray")(c,function(a){return this.$1.has(a.getKey())}.bind(this));c[0];c=c[1];var e=b("partitionArray")(Array.from(this.$1),function(a){var b=a[0];a[1];return d.has(b)}),f=e[0];e=e[1];e=e.map(function(a){return a[1]});f=f.map(function(a){return a[1]});var g=this.__getRendererDelegate();g&&(c.forEach(function(b){return b.onApply(a,g)}),f.forEach(function(b){var c=d.get(b.getKey())||b;b.onUpdate(a,g,c)}),e.forEach(function(b){return b.onRemove(a,g)}));c.forEach(function(a){return this.$1.set(a.getKey(),a)}.bind(this));e.forEach(function(a){return this.$1["delete"](a.getKey())}.bind(this))};function a(a){__p&&__p();return function(){__p&&__p();var c;c=babelHelpers.inherits(d,i);c&&c.prototype;d.prototype.render=function(){"use strict";return b("React").createElement(a,babelHelpers["extends"]({ref:function(a){return this.__component=a}.bind(this)},this.props),this.__delegateChildren(this.props.children))};function d(){"use strict";c.apply(this,arguments)}return d}()}function c(a){__p&&__p();return function(){__p&&__p();var c,d;c=babelHelpers.inherits(e,i);d=c&&c.prototype;e.prototype.componentDidMount=function(){"use strict";d.componentDidMount.call(this);var a=this.props.sceneDelegate;a&&a.setCamera(this.__sceneElement)};e.prototype.componentWillUnmount=function(){"use strict";d.componentWillUnmount.call(this);var a=this.props.sceneDelegate;a&&a.setCamera(null)};e.prototype.__mount=function(a,b){"use strict";a.add(b.model())};e.prototype.__unmount=function(a,b){"use strict";a.remove(b.model())};e.prototype.render=function(){"use strict";return b("React").createElement(a,babelHelpers["extends"]({ref:function(a){return this.__component=a}.bind(this)},this.props),this.__delegateChildren(this.props.children))};function e(){"use strict";c.apply(this,arguments)}return e}()}function d(a){__p&&__p();return function(){__p&&__p();var c;c=babelHelpers.inherits(d,b("React").Component);c&&c.prototype;d.prototype.screenshot=function(){"use strict";if(this.$1)return this.$1.screenshot();else return null};d.prototype.getElement=function(){"use strict";if(this.$1)return this.$1.getElement();else return null};d.prototype.render=function(){"use strict";var c=b("React").Children.map(this.props.children,function(a){return b("React").cloneElement(a,{rendererDelegate:{requestUpdate:function(a,b){return this.$1&&this.$1.update(a,b)}.bind(this),getRenderElement:function(){return this.$1&&this.$1.getElement()}.bind(this),getRenderDimension:function(){return this.$1&&this.$1.getDimension()}.bind(this)}})}.bind(this)),d=this.props,e=d.width;d=d.height;return b("React").createElement("div",{name:"renderer container",style:{width:e+"px",height:d+"px"}},b("React").createElement(a,babelHelpers["extends"]({ref:function(a){return this.$1=a}.bind(this)},this.props)),c)};function d(){"use strict";c.apply(this,arguments)}return d}()}function f(a){"use strict";this.props=a}f.prototype.getKey=function(){"use strict";return this.props.key};f.prototype.getProps=function(){"use strict";return this.props};f.prototype.onApply=function(a,b){"use strict"};f.prototype.onUpdate=function(a,b,c){"use strict"};f.prototype.onRemove=function(a,b){"use strict"};e.exports={makeRenderable:a,makeCamera:c,makeRenderer:d,R3Effect:f,Scene:b("R3Scene")}}),null);
__d("GltfRenderable.react",["React","React3"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React3").makeRenderable;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.element=function(){"use strict";var a=this.props.model;return a};a.prototype.render=function(){"use strict";return b("React").createElement("div",{name:"GLTFModel"},this.props.children)};function a(){"use strict";g.apply(this,arguments)}e.exports=c(a)}),null);
__d("PerspectiveCamera.react",["React","React3","SocialVRThreeJS"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React3").makeCamera;var h=b("SocialVRThreeJS").Object3D,i=b("SocialVRThreeJS").PerspectiveCamera;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){"use strict";__p&&__p();var a=this.props,b=a.aspectRatio,c=a.fov;c=c===void 0?45:c;var d=a.near;d=d===void 0?.01:d;var e=a.far;e=e===void 0?1e3:e;var f=a.position;a=a.lookAt;this.$1=new i(c,b,d,e);this.$2=new h();this.$2.add(this.$1);if(f!=null){(c=this.$2.position).set.apply(c,f)}if(a!=null){this.$3=new h();(b=this.$3.position).set.apply(b,a);this.$1.lookAt(0,0,1);this.$2.lookAt(this.$3.position)}};a.prototype.componentDidUpdate=function(){"use strict";__p&&__p();var a=this.props,b=a.position;a=a.lookAt;if(b!=null){var c;(c=this.$2.position).set.apply(c,b)}if(a!=null){(c=this.$3.position).set.apply(c,a);this.$1.lookAt(0,0,1);this.$2.lookAt(this.$3.position)}};a.prototype.element=function(){"use strict";return this.$4(this.$1)};a.prototype.model=function(){"use strict";return this.$2};a.prototype.render=function(){"use strict";return b("React").createElement("div",{name:"Perspective Camera"},this.props.children)};a.prototype.$4=function(a){"use strict";return Object.assign(a,{model:function(){return this.$2}.bind(this),target:function(){return this.$3}.bind(this)})};function a(){"use strict";g.apply(this,arguments)}e.exports=c(a)}),null);
__d("Asset3DScene.react",["GltfRenderable.react","PerspectiveCamera.react","React","React3","SocialVRThreeJS"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React3").Scene,i=b("SocialVRThreeJS").Box3,j=b("SocialVRThreeJS").Vector3,k=1.5,l=Math.PI/8;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.screenshot=function(){return this.refs.renderer.screenshot()};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.model,d=a.onCameraUpdate,e=a.cameraEffects,f=a.modelEffects,g=a.cameraPosition;a=a.cameraTarget;var k=new i().setFromObject(c),l=k.min,m=k.max;g=g&&a?{position:g,target:a}:this.$1(l,m);a=g.position;l=g.target;m=k.getSize(new j());g=m.x;k=m.y;m=m.z;g=Math.sqrt(g/2*(g/2)+k/2*(k/2)+m/2*(m/2));k=Math.sqrt((a[0]-l[0])*(a[0]-l[0])+(a[1]-l[1])*(a[1]-l[1])+(a[2]-l[2])*(a[2]-l[2]));return b("React").createElement(h,this.props,b("React").createElement(b("PerspectiveCamera.react"),{position:a,lookAt:l,near:k-g,far:k+g,effects:e||[],onUpdate:d}),b("React").createElement(b("GltfRenderable.react"),{model:c,effects:f}))};a.prototype.$1=function(a,b){var c=b.x,d=b.y;b=b.z;var e=a.x,f=a.y;a=a.z;var g={x:(c+e)*.5,y:(d+f)*.5,z:(b+a)*.5};c=Math.sqrt((c-e)*(c-e)+(d-f)*(d-f)+(b-a)*(b-a));return{position:[g.x,g.y+c*k*Math.sin(l),g.z+c*k*Math.cos(l)],target:[g.x,g.y,g.z]}};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("SceneRenderer",["FBLogger","SocialVRThreeJS"],(function(a,b,c,d,e,f){__p&&__p();b("SocialVRThreeJS").Camera;b("SocialVRThreeJS").Scene;var g=b("SocialVRThreeJS").WebGLRenderer;function a(){"use strict";try{var a=new g({antialias:!0,alpha:!0});this.$1=!0;a.gammaOutput=!0;this.__renderer=a}catch(a){this.$1=!1,b("FBLogger")("Asset3DSceneRenderer").info("failed to create a webgl context (will fallback to 2D version)",a)}this.__width=0;this.__height=0}a.prototype.isValid=function(){"use strict";return this.$1};a.prototype.render=function(a,b,c,d){"use strict";__p&&__p();var e=d.height;d=d.width;d=Math.round(d);e=Math.round(e);var f=this.__renderer;if(f){this.__isSizeValid(d,e)||this.__resize(d,e);f.render(b,c);b=f.getDrawingBufferSize();c=b.width;b=b.height;a.clearRect(0,0,d,e);a.drawImage(f.domElement,0,0,c,b,0,0,d,e)}return this};a.prototype.getEl=function(){"use strict";return this.__renderer&&this.__renderer.domElement};a.prototype.dispose=function(){"use strict";this.__renderer&&(this.__renderer.dispose(),this.__renderer=null);return this};a.prototype.__resize=function(a,b){"use strict";this.__renderer&&(this.__renderer.setSize(a,b),this.__width=a,this.__height=b);return this};a.prototype.__isSizeValid=function(a,b){"use strict";return this.__width===a&&this.__height===b};e.exports=a}),null);
__d("FixedSizedSceneRenderer",["SceneRenderer"],(function(a,b,c,d,e,f){__p&&__p();var g,h=null;g=babelHelpers.inherits(i,b("SceneRenderer"));g&&g.prototype;i.getInstance=function(){"use strict";h==null&&(h=new i());return h};i.prototype.__resize=function(b,c){"use strict";var a=this.__renderer;a&&(this.__width=Math.max(b,this.__width),this.__height=Math.max(c,this.__height),a.setSize(this.__width,this.__height));return this};i.prototype.__isSizeValid=function(a,b){"use strict";return this.__width>=a&&this.__height>=b};function i(){"use strict";g.apply(this,arguments)}e.exports=i}),null);
__d("CanvasRenderer.react",["FixedSizedSceneRenderer","React","React3"],(function(a,b,c,d,e,f){__p&&__p();var g,h=new(b("FixedSizedSceneRenderer"))();c=b("React3").makeRenderer;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){"use strict";var a=this.refs.canvas;this.$1=a.getContext("2d");a.addEventListener("contextmenu",function(a){a.preventDefault();return!1})};a.prototype.getElement=function(){"use strict";return this.refs.canvas};a.prototype.getDimension=function(){"use strict";var a=this.props,b=a.width;a=a.height;return{width:b,height:a}};a.prototype.update=function(a,b){"use strict";var c=this.props,d=c.width;d=d===void 0?100:d;c=c.height;c=c===void 0?100:c;h.render(this.$1,a,b,{width:d,height:c,pixelRatio:window.devicePixelRatio})};a.prototype.screenshot=function(){"use strict";return this.refs.canvas.toDataURL("image/png")};a.prototype.render=function(){"use strict";var a=this.props,c=a.width;c=c===void 0?100:c;a=a.height;a=a===void 0?100:a;return b("React").createElement("canvas",{ref:"canvas",width:c,height:a,style:{width:c+"px",height:a+"px"}})};function a(){"use strict";g.apply(this,arguments)}e.exports=c(a)}),null);
__d("R3AmbientLight",["React3","SocialVRThreeJS"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React3").R3Effect;var h=b("SocialVRThreeJS").AmbientLight;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(a){"use strict";g.constructor.call(this,a||{key:"R3AmbientLight",color:16777215,intensity:.5})}a.prototype.onApply=function(a,b){"use strict";var c=this.props,d=c.color;c=c.intensity;d=new h(d,c);a.add(d);b&&b.requestUpdate();this.$R3AmbientLight1=d};a.prototype.onRemove=function(a,b){"use strict";a&&this.$R3AmbientLight1&&a.remove(this.$R3AmbientLight1)};e.exports=a}),null);
__d("R3DirectionalLight",["React3","SocialVRThreeJS"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React3").R3Effect;var h=b("SocialVRThreeJS").DirectionalLight;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(a){"use strict";g.constructor.call(this,a||{key:"R3DirectionalLight",position:[0,1,0],color:16777215,intensity:.5})}a.prototype.onApply=function(a,b){var c=this.props,d=c.position,e=c.color;c=c.intensity;e=new h(e,c);(c=e.position).set.apply(c,d);e.target=a;a.add(e);b&&b.requestUpdate();this.$R3DirectionalLight1=e};a.prototype.onRemove=function(a,b){"use strict";this.$R3DirectionalLight1&&a.remove(this.$R3DirectionalLight1)};e.exports=a}),null);
__d("R3OrbitalAnimation",["Asset3DUtils","React3"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React3").R3Effect;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(a){"use strict";g.constructor.call(this,a||{key:"R3OrbitalAnimation",speed:.001,duration:1e3}),this.$R3OrbitalAnimation1=!1}a.prototype.onApply=function(a,b){"use strict";this.$R3OrbitalAnimation1=!0,window.requestAnimationFrame(function(){return this.$R3OrbitalAnimation2(a,b)}.bind(this))};a.prototype.onRemove=function(a,b){"use strict";this.$R3OrbitalAnimation1=!1};a.prototype.$R3OrbitalAnimation2=function(a,c){"use strict";__p&&__p();if(this.$R3OrbitalAnimation1){var d=this.props.speed;d=d===void 0?.001:d;var e=a.model().position,f=a.target().position,g=b("Asset3DUtils").getCameraOrientation(a),h=g.yaw;g=g.pitch;e=e.clone().sub(f).length();d=d*Math.PI*2;h=b("Asset3DUtils").polarCoordToCartesianCoord(h+d,g);d=h.x;g=h.y;h=h.z;a.model().position.set(e*d+f.x,e*g+f.y,e*h+f.z);a.model().lookAt(f.x,f.y,f.z);c.requestUpdate();window.requestAnimationFrame(function(){return this.$R3OrbitalAnimation2(a,c)}.bind(this))}};e.exports=a}),null);
__d("R3SphericalCameraControl",["Asset3DUtils","React3","SphericalViewportControl","SubscriptionsHandler","radToDeg"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React3").R3Effect;var h=.15,i=50;g=babelHelpers.inherits(a,c);g&&g.prototype;a.prototype.onApply=function(a,b){"use strict";__p&&__p();if(b){this.$R3SphericalCameraControl1=this.$R3SphericalCameraControl3(a,b.getRenderElement());var c=b.getRenderDimension(),d=c.width;c=c.height;this.__configSphericalViewportControl(this.$R3SphericalCameraControl1);this.$R3SphericalCameraControl1.updateViewportClientSize({width:d,height:c});this.$R3SphericalCameraControl4(this.$R3SphericalCameraControl1,a,b);b.requestUpdate()}};a.prototype.onUpdate=function(a,c,d){"use strict";c=b("Asset3DUtils").getCameraOrientation(a);d=c.yaw;a=c.pitch;this.$R3SphericalCameraControl1.setSphericalOrientation(b("radToDeg")(d),b("radToDeg")(a))};a.prototype.onRemove=function(a){"use strict";this.$R3SphericalCameraControl2.release()};a.prototype.$R3SphericalCameraControl3=function(a,c){"use strict";a=b("Asset3DUtils").getCameraOrientation(a);var d=a.yaw;a=a.pitch;var e={enableGyro:!1,slipFactor:h,enableRubberBanding:!1,disableAutoClientSizeUpdate:!0,enableZoomWithShiftKey:!0,enablePanningWithRightMouse:!0,listenOnlyOneElement:!1};d={expansionCoef:1.01,fieldOfView:this.props.fov==null?i:this.props.fov,initialHeading:b("radToDeg")(d),initialPitch:b("radToDeg")(a),projectionType:"flat"};return new(b("SphericalViewportControl"))(c,d,this.__getSphericalViewportControlConfig(e))};a.prototype.$R3SphericalCameraControl4=function(a,c,d){var e;this.$R3SphericalCameraControl2=new(b("SubscriptionsHandler"))();(e=this.$R3SphericalCameraControl2).addSubscriptions.apply(e,this.__registerOtherListeners(a,c,d))};a.prototype.__configSphericalViewportControl=function(a){"use strict"};a.prototype.__getSphericalViewportControlConfig=function(a){"use strict";return a};a.prototype.__registerOtherListeners=function(a,b,c){"use strict";return[]};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("R3PanCameraControl",["R3SphericalCameraControl","React","SocialVRThreeJS","degToRad"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("SocialVRThreeJS").Vector3;c=babelHelpers.inherits(a,b("R3SphericalCameraControl"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a||{panSpeed:1,key:"R3PanCameraControl"}),this.$R3PanCameraControl1=0,this.$R3PanCameraControl2=0}a.prototype.render=function(){"use strict";return b("React").createElement("div",{name:"attribute zoomable camera control"})};a.prototype.__registerOtherListeners=function(a,c,d){"use strict";return[a.addListener("viewportChange",function(a,c,d){this.$R3PanCameraControl1=b("degToRad")(a),this.$R3PanCameraControl2=b("degToRad")(c)}.bind(this)),a.addListener("panningWithRightMouse",function(a){var b=a.x;a=a.y;this.$R3PanCameraControl3(c,-b,a,0,this.$R3PanCameraControl1,this.$R3PanCameraControl2);d.requestUpdate()}.bind(this))]};a.prototype.__getSphericalViewportControlConfig=function(a){"use strict";return Object.assign({},a,{enableGyro:!1})};a.prototype.$R3PanCameraControl3=function(a,b,c,d,e,f){"use strict";__p&&__p();d=this.props.panSpeed;d=d===void 0?1:d;var g=a.target();a=a.model();var i=a.position.clone().sub(g.position),j=new h(1,0,0).applyAxisAngle(new h(0,1,0),e).normalize();f=new h(0,1,0).applyAxisAngle(new h(1,0,0),-f).applyAxisAngle(new h(0,1,0),e).normalize();g.position.add(j.multiplyScalar(b*d));g.position.add(f.multiplyScalar(c*d));e=g.position;j=e.clone().add(i);a.position.set(j.x,j.y,j.z)};e.exports=a}),null);
__d("R3PositionalCameraControl",["Asset3DUtils","React3"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React3").R3Effect;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(a){"use strict";g.constructor.call(this,a||{key:"R3PositionalCameraControl",range:.1*Math.PI,bound:.5*Math.PI}),this.$R3PositionalCameraControl1=0}a.prototype.onApply=function(a,b){"use strict";var c=this.props,d=c.positionUpdate;c=c.initialPosition;d&&(this.$R3PositionalCameraControl2=d.addListener("position",function(c){c>=0&&c<=1&&(this.$R3PositionalCameraControl3(a,c),b.requestUpdate())}.bind(this)));c!=null&&(c>=0&&c<=1&&(this.$R3PositionalCameraControl3(a,c),b.requestUpdate()))};a.prototype.onRemove=function(a,b){"use strict";this.$R3PositionalCameraControl2&&this.$R3PositionalCameraControl2.remove()};a.prototype.$R3PositionalCameraControl3=function(a,c){"use strict";__p&&__p();var d=this.props,e=d.range;d=d.bound;e=e==null?.1*Math.PI:parseFloat(e);d=d==null?.5*Math.PI:parseFloat(d);c=c*e-.5*e;e=this.$R3PositionalCameraControl1;var f=b("Asset3DUtils").getCameraOrientation(a),g=f.yaw;f=f.pitch;f=Math.max(-d,Math.min(f-e+c,d));e=a.target();d=e.position;e=a.model();a=e.position;a=a.clone().sub(d).length();g=b("Asset3DUtils").polarCoordToCartesianCoord(g,f);f=g.x;var h=g.y;g=g.z;e.position.set(a*f+d.x,a*h+d.y,a*g+d.z);e.lookAt(d.x,d.y,d.z);this.$R3PositionalCameraControl1=c};e.exports=a}),null);
__d("R3TurntableCameraControl",["Asset3DUtils","R3SphericalCameraControl","React","degToRad"],(function(a,b,c,d,e,f){__p&&__p();var g,h=6,i=3;c=babelHelpers.inherits(a,b("R3SphericalCameraControl"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a||{enableGyro:!1,key:"R3TurntableCameraControl"})}a.prototype.render=function(){"use strict";return b("React").createElement("div",{name:"attribute turnable camera control"})};a.prototype.__registerOtherListeners=function(a,c,d){"use strict";__p&&__p();if(d)return[a.addListener("viewportChange",function(a,e,f){f=b("degToRad")(a);a=b("degToRad")(e);this.$R3TurntableCameraControl1(c,f,a);d.requestUpdate()}.bind(this)),a.addListener("updateViewportEnd",function(b,c){this.props.enableGyro&&a.reEnableGyro()}.bind(this)),a.addListener("onMovementStart",function(a,b){this.props.onInteractionStart&&this.props.onInteractionStart(c)}.bind(this)),a.addListener("DOM/click",function(a){d.getRenderElement().dispatchEvent(new Event("DOM/click",{bubbles:!0}))})];else return[]};a.prototype.__configSphericalViewportControl=function(a){"use strict";a.setAngularVelocityScaleFactor({x:h,y:i})};a.prototype.__getSphericalViewportControlConfig=function(a){"use strict";return Object.assign({},a,{enableGyro:!!this.props.enableGyro})};a.prototype.$R3TurntableCameraControl1=function(a,c,d){"use strict";__p&&__p();var e=a.target();e=e.position;a=a.model();var f=a.position;f=f.clone().sub(e).length();c=b("Asset3DUtils").polarCoordToCartesianCoord(c,d);d=c.x;var g=c.y;c=c.z;a.position.set(f*d+e.x,f*g+e.y,f*c+e.z);a.lookAt(e.x,e.y,e.z)};e.exports=a}),null);
__d("R3ZoomCameraControl",["R3SphericalCameraControl","React"],(function(a,b,c,d,e,f){__p&&__p();var g,h=.001;c=babelHelpers.inherits(a,b("R3SphericalCameraControl"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a||{key:"R3ZoomCameraControl",zoomSpeed:.05})}a.prototype.render=function(){"use strict";return b("React").createElement("div",{name:"attribute zoomable camera control"})};a.prototype.__getSphericalViewportControlConfig=function(a){"use strict";return Object.assign({},a,{enableGyro:!1})};a.prototype.__registerOtherListeners=function(a,b,c){"use strict";__p&&__p();var d=this.props,e=d.maxCameraDistance,f=d.minCameraDistance;d=d.zoomSpeed;var g=d==null?.05:parseFloat(d);if(c)return[a.addListener("wheelScrollWithShiftKey",function(a,d){d=b.model();var i=b.target();i=i.position.clone().sub(d.position.clone());var j=i.length();i=i.normalize();a>0&&(b.near-j*g>=h&&(e==null||j<=e)&&(d.position.add(i.multiplyScalar(j*g)),b.near-=j*g,b.far-=j*g,b.updateProjectionMatrix(),c.requestUpdate()));a<0&&((f==null||j>=f)&&(d.position.sub(i.multiplyScalar(j*g)),b.near+=j*g,b.far+=j*g,b.updateProjectionMatrix(),c.requestUpdate()))})];else return[]};a.prototype.$R3ZoomCameraControl1=function(a){"use strict"};e.exports=a}),null);
__d("Asset3DFeedView.react",["Asset3DScene.react","Asset3DUtils","CanvasRenderer.react","EventListener","R3AmbientLight","R3DirectionalLight","R3OrbitalAnimation","R3PanCameraControl","R3PositionalCameraControl","R3TurntableCameraControl","R3ZoomCameraControl","React","SocialVRThreeJS","SubscriptionsHandler","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("SocialVRThreeJS").Box3;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$3=!1,this.$4=new(b("SubscriptionsHandler"))(),this.$5=b("debounce")(function(){return this.$3=!1}.bind(this),50),c}a.prototype.screenshot=function(){return this.refs.renderer.screenshot()};a.prototype.componentDidMount=function(){var a=this.refs.content,c=this.props.onInteractionStart;c&&this.$4.addSubscriptions(b("EventListener").listen(a,"mousemove",function(){!this.$3?(this.$3=!0,c()):this.$5()}.bind(this)),b("EventListener").listen(a,"mouseenter",c),b("EventListener").listen(a,"mousedown",c))};a.prototype.render=function(){var a=this.props,c=a.model,d=a.viewportInfo,e=d.width;d=d.height;var f=a.onCameraUpdate,g=a.cameraPosition;a=a.cameraTarget;return b("React").createElement("div",{ref:"content"},b("React").createElement(b("CanvasRenderer.react"),{width:e,height:d,ref:"renderer"},b("React").createElement(b("Asset3DScene.react"),{model:c,cameraPosition:g,cameraTarget:a,onCameraUpdate:f,cameraEffects:this.$6(this.props),modelEffects:[new(b("R3DirectionalLight"))({key:"directionalLight",position:[1,2,1]}),new(b("R3AmbientLight"))({key:"ambientLight",color:13421772,intensity:.5})]})))};a.prototype.$6=function(a){__p&&__p();var c=a.model,d=a.isAttractionMode,e=a.positionUpdate,f=a.isInViewport;f=f===void 0?!0:f;a=a.scrollPosition;c=new h().setFromObject(c);var g=c.min;c=c.max;g=[new(b("R3TurntableCameraControl"))({key:"turntalbeControl",enableGyro:!0}),new(b("R3PanCameraControl"))({key:"panControl",panSpeed:b("Asset3DUtils").getPanSpeed(g,c)}),new(b("R3ZoomCameraControl"))()];d===!0&&g.push(new(b("R3OrbitalAnimation"))({key:"orbitalAnimation"}));f===!0&&g.push(new(b("R3PositionalCameraControl"))({key:"positionalControl",positionUpdate:e,range:.5*Math.PI,bound:.25*Math.PI,initialPosition:a}));return g};e.exports=a}),null);
__d("Asset3DFullscreenViewContainer.react",["cx","Asset3DBackgroundSize","Asset3DFeedView.react","Asset3DUtils","FBLogger","FDSCloseButton.react","React","Spotlight.react","UIPagelet","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onExit()}.bind(this),b}a.prototype.componentDidMount=function(){this.$2()};a.prototype.render=function(){var a=this.props,c=a.model,d=a.viewportInfo;a=a.backgroundType;var e=d.height;return b("React").createElement(b("Spotlight.react"),{onHide:this.$1,shown:!0,rootClassName:"_6gen"},b("React").createElement("div",{className:"_6gdn"},b("React").createElement(b("FDSCloseButton.react"),{onClick:function(){return this.$1()}.bind(this),size:"large"})),b("React").createElement("div",{className:"_n3"},b("React").createElement("div",{className:"_6iy4"},b("React").createElement("div",{style:this.$3(a)},b("React").createElement("div",{ref:"contentContainer"},b("React").createElement(b("Asset3DFeedView.react"),{model:c,viewportInfo:d}))),b("React").createElement("div",{style:{height:e,overflowY:"auto"},className:"_6iy5",id:"pagelet_asset3d_viewer"}))))};a.prototype.$2=function(){try{b("UIPagelet").loadFromEndpoint("Asset3DViewerPagelet",b("ge")("pagelet_asset3d_viewer",this.root),{storyID:this.props.storyID})}catch(a){b("FBLogger")("Asset3DFullscreenViewerContainer").info("the modal has been closed",a)}};a.prototype.$3=function(a){if(a!=null)return b("Asset3DUtils").getBackgroundStyles(a,b("Asset3DBackgroundSize").STORY);else return null};e.exports=a}),null);
__d("Asset3DModalViewerStore",["undux"],(function(a,b,c,d,e,f){a=b("undux").connect;c=b("undux").createStore;d={pointerPos:{x:0,y:0}};f=c(d);e.exports.withStore=a(f)}),null);
__d("Asset3DViewerHelper",["Asset3DConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("Asset3DConstants").CAMERA_RADIUS,h=b("Asset3DConstants").MAX_ZOOM,i=b("Asset3DConstants").MODAL,j=b("Asset3DConstants").ROTATION_FACTOR;e.exports={getCameraViewParams:function(a,b,c,d,e,f){__p&&__p();var k=.5*c,l=.5*d;a=2*(a-k)/c;k=-2*(b-l)/d;c=e>f;b=Math.sin(k*Math.PI*.5);l=Math.sin(a*Math.PI*.5);d=f*j*b;k=e*j*l;a=Math.tan(e/2)*g*(c?i.H_TARGET_FACTOR.H_PHOTO:i.H_TARGET_FACTOR.V_PHOTO);e=Math.tan(f/2)*g*(c?i.V_TARGET_FACTOR.H_PHOTO:i.V_TARGET_FACTOR.V_PHOTO);f=-b*e;b=-l*a;e=h*-.1;l=-d;a=-k;d=g+e;k=c?i.H_TARGET_DISTRIBUTE_FACTOR.H_PHOTO:i.H_TARGET_DISTRIBUTE_FACTOR.V_PHOTO;e=c?i.V_TARGET_DISTRIBUTE_FACTOR.H_PHOTO:i.V_TARGET_DISTRIBUTE_FACTOR.V_PHOTO;return{lookAtPos:[-(1-k)*b,-(1-e)*f,-g],cameraPos:[d*Math.cos(l)*Math.sin(a),0+d*Math.sin(l),-g+d*Math.cos(l)*Math.cos(a)]}}}}),null);
__d("Asset3dCameraControl",["EventListener","SocialVRThreeJS","degToRad"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=.01,h=2e3,i=b("degToRad")(270),j=b("degToRad")(0),k=50,l=5e3;function a(a,c,d,e,f){__p&&__p();this.__cameraTarget=new(b("SocialVRThreeJS").Vector3)();this.__width=0;this.__height=0;this.__aspectRatio=1;this.__yaw=i;this.__pitch=j;this.__dirty=!0;this.__isInAttractMode=!1;this.__attractModeAnimationFrameID=null;this.$1=null;this.__fullVisibility=!1;this.__width=a;this.__height=c;this.__canvas=d;this.__camera=new(b("SocialVRThreeJS").PerspectiveCamera)(k,this.__width/this.__height,g,h);this.__renderingControl=f;e=new(b("SocialVRThreeJS").DirectionalLight)(15658734);e.position.set(1,2,1);this.__camera.add(e);this.setupViewportListeners();this.setDirty(!0);b("EventListener").listen(document,"visibilitychange",function(){this.setDirty(!0,!0)}.bind(this));b("EventListener").listen(window,"blur",function(){this.setDirty(!0,!0)}.bind(this));b("EventListener").listen(window,"focus",function(){this.setDirty(!0,!0)}.bind(this))}a.prototype.modelLoad=function(a,b){b===void 0};a.prototype.setupViewportListeners=function(){};a.prototype.update=function(a){};a.prototype.camera=function(){return this.__camera};a.prototype.getHorizontalFov=function(){return this.__hFov};a.prototype.getVerticalFov=function(){return this.__vFov};a.prototype.destroy=function(){this.$1&&(clearTimeout(this.$1),this.$1=null)};a.prototype.isDirty=function(){return this.__dirty};a.prototype.setDirty=function(a,b){b===void 0&&(b=!1),this.__dirty=a,a&&b&&(this.__isInAttractMode&&this.__exitAttractMode(),this.$1&&(clearTimeout(this.$1),this.$1=null),this.__fullVisibility&&(this.$1=setTimeout(function(){this.$1=null,this.__enterAttractMode()}.bind(this),l)))};a.prototype.setFullVisibility=function(a){this.__fullVisibility=a};a.prototype.resetCamera=function(){};a.prototype.__updateResetCamera=function(){};a.prototype.__enterAttractMode=function(){this.__isInAttractMode=!0};a.prototype.__exitAttractMode=function(){this.__attractModeAnimationFrameID!==null&&(cancelAnimationFrame(this.__attractModeAnimationFrameID),this.__attractModeAnimationFrameID=null),this.__isInAttractMode=!1};a.prototype.resize=function(a,b){};a.prototype.aspectRatio=function(){return this.__aspectRatio};e.exports=a}),null);
__d("Asset3dContextMenu",["CurrentUser","EventListener","React","ReactXUIMenu","UserAgent","MountedContextMenu.react","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReactXUIMenu").Item;function a(a,c,d,e,f,g){this.$8=function(a){var c=/^a$/i.test(a.target.nodeName||""),d=b("UserAgent").isPlatform("Mac OS X")?a.metaKey:a.ctrlKey;c=!c&&b("CurrentUser").isEmployee()&&d;c?(a.preventDefault(),this.$9()):(b("ReactDOM").unmountComponentAtNode(this.$1),delete this.$3)}.bind(this),this.$1=a,this.$2=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,b("EventListener").listen(c,"contextmenu",this.$8)}a.prototype.$9=function(){if(this.$2){var a,c,d;this.$4&&(a=b("React").createElement(g,{href:this.$4,target:"_blank"},"Download 3D File"));this.$5&&(c=b("React").createElement(g,{href:this.$5,target:"_blank"},"Download Original Image File"));this.$6&&(d=b("React").createElement(g,{href:this.$6,target:"_blank"},"3D Photo console"));var e=b("React").createElement(b("ReactXUIMenu"),null,a,c,d,b("React").createElement(g,{onclick:this.$7},"Dev Info"));e=b("React").createElement(b("MountedContextMenu.react"),{mountedTriggerElem:this.$2,menu:e});this.$3=b("ReactDOM").render(e,this.$1)}};e.exports=a}),null);
__d("Asset3dComponentContextMenu.react",["Asset3dContextMenu","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){this.props.target&&(this.$1=new(b("Asset3dContextMenu"))(this.refs.container,this.props.target,this.props.fileURL,this.props.fallbackImgURL,this.props.consoleURL,this.props.onToggleDevPanel))};a.prototype.render=function(){return b("React").createElement("div",{ref:"container"})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("Asset3DLoader",["regeneratorRuntime","Promise","ActorURI","Asset3DStatus","XAsset3DForLinkShareSrcController","XAsyncRequest"],(function(a,b,c,d,e,f){__p&&__p();var g=10,h=1e3,i="Failed to load the asset because the arguments provided is not enought",j="Failed to load the asset because the max times of retry has reached",k="Failed to load the asset because the request to the server returned failed";function a(a,b){"use strict";this.$1=a,this.$2=b||{timesOfRetry:g,retryDelay:h}}a.prototype.parse=function(a){"use strict";return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.$1.parse(a));case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},null,this)};a.prototype.load=function(a){"use strict";__p&&__p();var c,d,e,f,g,h;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:a===void 0&&(a={});c=a,d=c.uri,e=c.statusID,f=c.actorID,g=c.assetID;if(d){j.next=10;break}if(!(e&&f)){j.next=7;break}return j.abrupt("return",this.$3(this.__createURL(e,f)));case 7:return j.abrupt("return",b("Promise").resolve({error:i}));case 8:j.next=14;break;case 10:j.next=12;return b("regeneratorRuntime").awrap(this.$1.load(a));case 12:h=j.sent;return j.abrupt("return",Object.assign({},h,{assetID:g,uri:d}));case 14:case"end":return j.stop()}},null,this)};a.prototype.__createURL=function(a,c){"use strict";return b("ActorURI").create(b("XAsset3DForLinkShareSrcController").getURIBuilder().setFBID("status_id",String(a)).getURI(),c)};a.prototype.$3=function(a,c,d){c===void 0&&(c=1);d===void 0&&(d=0);return new(b("Promise"))(function(c,e){var f=new(b("XAsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setHandler(c).setErrorHandler(function(a){return this.$4(a)}.bind(this));d>0?setTimeout(function(){f.send()},d):f.send()}.bind(this)).then(function(b){return this.$5(a,c,b)}.bind(this))};a.prototype.$5=function(a,c,d){"use strict";__p&&__p();var e,f,g,h,i;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:e=d.getPayload(),f=e.status,g=e.asset3d_id,h=e.glb_uri;l.t0=f;l.next=l.t0===b("Asset3DStatus").UPLOADING?4:l.t0===b("Asset3DStatus").SUCCESS?5:9;break;case 4:return l.abrupt("return",this.$2.timesOfRetry>=c?this.$3(a,++c,this.$2.retryDelay):b("Promise").resolve({error:j}));case 5:l.next=7;return b("regeneratorRuntime").awrap(this.$1.load({assetID:g,uri:h}));case 7:i=l.sent;return l.abrupt("return",Object.assign({},i,{assetID:g,uri:h}));case 9:return l.abrupt("return",b("Promise").resolve({error:k}));case 10:case"end":return l.stop()}},null,this)};a.prototype.$4=function(a){"use strict";throw a};e.exports=a}),null);
__d("Asset3DLoaderAdapter",["Promise","GLTFLoader.r93.patch"],(function(a,b,c,d,e,f){__p&&__p();b("GLTFLoader.r93.patch").patch(),e.exports=function(){__p&&__p();function a(a){"use strict";this.$1=a}a.prototype.load=function(a){"use strict";var c=a.uri;return c==null?b("Promise").reject({error:"Not a valid uri"}):new(b("Promise"))(function(a,b){this.$1.load(c,function(b){a(b)},function(){},function(b){a({error:b})})}.bind(this))};a.prototype.parse=function(a){"use strict";return new(b("Promise"))(function(b,c){this.$1.parse(a,"",function(a){b(a)},function(){},function(a){b({error:a})})}.bind(this))};return a}()}),null);
__d("Asset3DLoaderFactory",["Asset3DLoader","Asset3DLoaderAdapter","GLTFLoader.r93.patch"],(function(a,b,c,d,e,f){var g=b("GLTFLoader.r93.patch").patch();e.exports={make:function(a){switch(a){default:return new(b("Asset3DLoader"))(new(b("Asset3DLoaderAdapter"))(new g()),{retryDelay:1e3,timesOfRetry:10})}}}}),null);
__d("SceneViewer.react",["cx","React","SceneRenderer","SocialVRThreeJS"],(function(a,b,c,d,e,f,g){__p&&__p();var h;b("SocialVRThreeJS").Camera;b("SocialVRThreeJS").Scene;var i=new(b("SceneRenderer"))();h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){"use strict";return!0};a.prototype.componentDidMount=function(){"use strict";var a=this.props.viewportInfo,b=a.height;a=a.width;this.$1=this.refs.canvas.getContext("2d");this.$2(a,b);this.$3()};a.prototype.$3=function(){"use strict";var a=this.props,b=a.camera,c=a.scene,d=a.viewportInfo;a=a.onRenderFailed;var e=this.$1;e&&i.isValid()?i.render(e,c,b,d):a&&a()};a.prototype.render=function(){"use strict";var a=this.props.viewportInfo,c=a.height;a=a.width;this.$4(a,c);this.$3();return b("React").createElement("canvas",{ref:"canvas",className:"_6dax"})};a.prototype.$4=function(a,b){"use strict";var c=this.refs.canvas;c&&(c.width!==Math.round(a)||c.height!==Math.round(b))&&this.$2(a,b)};a.prototype.$2=function(a,b){"use strict";var c=this.refs.canvas;c.width=Math.round(a);c.height=Math.round(b)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("Asset3dFeedViewerModalContainer.react",["cx","AnimatedCameraMotion","Asset3DModalViewerStore","Asset3DViewerHelper","EventListener","FDSCloseButton.react","React","UIPagelet","ge","rxjs","SceneViewer.react","SocialVRThreeJS","Spotlight.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("AnimatedCameraMotion").withAnimatedCameraMotion;d=b("Asset3DModalViewerStore").withStore;b("rxjs").Subscription;var i=c(b("SceneViewer.react"));b("SocialVRThreeJS").Camera;b("SocialVRThreeJS").Scene;f=babelHelpers.inherits(a,b("React").Component);h=f&&f.prototype;function a(a){__p&&__p();h.constructor.call(this);this.state={cameraPos:null,lookAtPos:null};this.$2=function(){this.props.onExit()}.bind(this);var c=a.store,d=a.viewportInfo,e=a.asset3DInfo;this.$1=c.on("pointerPos").subscribe(function(a){var c=a.x;a=a.y;var f=e.horizontalFov,g=e.verticalFov,h=d.width,i=d.height;c=b("Asset3DViewerHelper").getCameraViewParams(c,a,h,i,f,g);a=c.cameraPos;h=c.lookAtPos;this.setState({lookAtPos:h,cameraPos:a})}.bind(this))}a.prototype.componentDidMount=function(){var a=this.props.store;b("EventListener").listen(this.refs.contentContainer,"mousemove",function(b){var c=b.offsetX;b=b.offsetY;a.set("pointerPos")({x:c,y:b})});this.setupFeedback()};a.prototype.componentWillUnmount=function(){this.$1.unsubscribe()};a.prototype.render=function(){var a=this.props,c=a.scene,d=a.camera;a=a.viewportInfo;var e=this.state,f=e.cameraPos;e=e.lookAtPos;var g=a.height;return b("React").createElement(b("Spotlight.react"),{onHide:this.$2,shown:!0,rootClassName:"_6gen"},b("React").createElement("div",{className:"_6gdn"},b("React").createElement(b("FDSCloseButton.react"),{onClick:function(){return this.$2()}.bind(this),size:"large"})),b("React").createElement("div",{className:"_n3"},b("React").createElement("div",{className:"_6iy4"},b("React").createElement("div",{ref:"contentContainer",tabIndex:0},b("React").createElement(i,{toLookAtPos:e,toCameraPos:f,scene:c,camera:d,viewportInfo:a})),b("React").createElement("div",{style:{height:g,overflowY:"auto"},className:"_6iy5",id:"pagelet_asset3d_viewer"}))))};a.prototype.setupFeedback=function(){b("UIPagelet").loadFromEndpoint("Asset3DViewerPagelet",b("ge")("pagelet_asset3d_viewer",this.root),{storyID:this.props.storyID})};e.exports=d(a)}),null);
__d("Asset3dThreeJsHelpers",["ThreeJS.r93","VertexAlphaMaterial"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={createRoundedCorneredPlane:function(a,c,d){__p&&__p();var e=new(b("ThreeJS.r93").Shape)();e.moveTo(0,d);e.lineTo(0,c-d);e.quadraticCurveTo(0,c,d,c);e.lineTo(a-d,c);e.quadraticCurveTo(a,c,a,c-d);e.lineTo(a,d);e.quadraticCurveTo(a,0,a-d,0);e.lineTo(d,0);e.quadraticCurveTo(0,0,0,d);return new(b("ThreeJS.r93").ShapeBufferGeometry)(e)},onModelLoad:function(a){__p&&__p();a.traverse(function(a){__p&&__p();if(a.isMesh){a=a;if(!a.geometry.isBufferGeometry)return;var c=a.material;c.map&&c.map.isTexture&&c.map.anisotropy===1&&(c.map.anisotropy=4);var d=a.geometry;d=d.getAttribute("color");var e=!1;if(d&&d.itemSize===4){for(var f=0,g=3;f<d.count;f++,g+=4)if(d.array[g]<1){e=!0;break}e&&(c=new(b("VertexAlphaMaterial"))({flatShading:c.flatShading,skinning:c.skinning,transparent:c.transparent,morphTargets:c.morphTargets,fog:!0,clipping:!0}));c.needsUpdate=!0;a.material=c}}})},disposeModel:function(a){a.traverse(function(a){a.isMesh&&(a.geometry&&a.geometry.dispose(),a.material&&(Object.values(a.material).forEach(function(a){a instanceof b("ThreeJS.r93").Texture&&a.dispose()}),a.material.dispose()))})}};e.exports=a}),null);
__d("Asset3dTurntableCameraControl",["Asset3dCameraControl","Ease","SocialVRThreeJS","SphericalViewportControl","Tween","degToRad","radToDeg","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("degToRad")(-70),i=b("degToRad")(100),j=1.2,k=.01,l=30,m=.95,n=.1,o=10,p=.15,q=270,r=50,s=.05,t=.001,u=6.5,v=1.2,w=Object.freeze({FAKE_GYRO_INITIAL:"fake_gyro_initial",FOCUS_STATE:"focus_state",FAKE_GYRO_AFTER_FOCUS:"fake_gyro_after_focus"});c=babelHelpers.inherits(a,b("Asset3dCameraControl"));g=c&&c.prototype;function a(a,c,d,e,f,h){__p&&__p();g.constructor.call(this,a,c,e,f,h),this.$Asset3dTurntableCameraControl1=new(b("SocialVRThreeJS").Object3D)(),this.$Asset3dTurntableCameraControl2=new(b("SocialVRThreeJS").Object3D)(),this.$Asset3dTurntableCameraControl3=new(b("SocialVRThreeJS").Vector3)(),this.$Asset3dTurntableCameraControl4=new(b("SocialVRThreeJS").Vector3)(),this.$Asset3dTurntableCameraControl5=new(b("SocialVRThreeJS").Object3D)(),this.$Asset3dTurntableCameraControl9=0,this.$Asset3dTurntableCameraControl10=!1,this.$Asset3dTurntableCameraControl12=w.FAKE_GYRO_INITIAL,this.$Asset3dTurntableCameraControl15=null,this.__updateResetCamera=function(){__p&&__p();var a=this.__sphericalViewportControl.getOrientation();Math.abs(a.x-this.__initialOrientation.x)>180&&(a.x>this.__initialOrientation.x?a.x-=360:a.x+=360);this.__sphericalViewportControl.setSphericalOrientation(a.x+s*(this.__initialOrientation.x-a.x),a.y+s*(this.__initialOrientation.y-a.y));var c=this.__camera.position;c.set(c.x+s*(this.__cameraInitialPosition.x-c.x),c.y+s*(this.__cameraInitialPosition.y-c.y),c.z+s*(this.__cameraInitialPosition.z-c.z));var d=this.__cameraTarget;d.set(d.x+s*(this.__cameraInitialTarget.x-d.x),d.y+s*(this.__cameraInitialTarget.y-d.y),d.z+s*(this.__cameraInitialTarget.z-d.z));this.$Asset3dTurntableCameraControl1.position.x+=s*(this.$Asset3dTurntableCameraControl13-this.$Asset3dTurntableCameraControl1.position.x);this.$Asset3dTurntableCameraControl2.position.y+=s*(this.$Asset3dTurntableCameraControl14-this.$Asset3dTurntableCameraControl2.position.y);var e=Math.abs(a.x);a=Math.abs(a.y);var f=Math.abs(c.x-this.__cameraInitialPosition.x),g=Math.abs(c.y-this.__cameraInitialPosition.y);c=Math.abs(c.z-this.__cameraInitialPosition.z);var h=Math.abs(d.x-this.__cameraInitialTarget.x),i=Math.abs(d.y-this.__cameraInitialTarget.y);d=Math.abs(d.z-this.__cameraInitialTarget.z);(e>t||a>t||f>t||g>t||c>t||h>t||i>t||d>t)&&this.$Asset3dTurntableCameraControl15?this.$Asset3dTurntableCameraControl15=b("requestAnimationFrame")(this.__updateResetCamera):this.$Asset3dTurntableCameraControl15=null}.bind(this),this.__camera.name="Turntable Camera",this.$Asset3dTurntableCameraControl5.add(this.__camera),d.add(this.$Asset3dTurntableCameraControl5),this.$Asset3dTurntableCameraControl11=new(b("Tween"))()}a.prototype.setupViewportListeners=function(){__p&&__p();var a={enableGyro:!0,slipFactor:p,enableRubberBanding:!1,disableAutoClientSizeUpdate:!0,enableZoomWithShiftKey:!0,enablePanningWithRightMouse:!0},c={expansionCoef:1.01,fieldOfView:r,initialHeading:q,initialPitch:0,projectionType:"flat"};this.__sphericalViewportControl=new(b("SphericalViewportControl"))(this.__canvas,c,a);this.__sphericalViewportControl.updateViewportClientSize({width:this.__width,height:this.__height});this.__sphericalViewportControl.addListener("viewportChange",function(a,c,d){this.__yaw=b("degToRad")(a),this.__pitch=b("degToRad")(-c),this.$Asset3dTurntableCameraControl12===w.FOCUS_STATE&&(this.__pitch=Math.min(b("degToRad")(45),Math.max(this.__pitch,b("degToRad")(-45)))),this.setDirty(!0)}.bind(this));this.__sphericalViewportControl.addListener("DOM/click",function(a){this.__canvas.dispatchEvent(new CustomEvent("DOM/click"))}.bind(this));this.__sphericalViewportControl.addListener("mouseMove",function(a){this.$Asset3dTurntableCameraControl10&&(this.__sphericalViewportControl.setMovementPosition(a),this.$Asset3dTurntableCameraControl10=!1),this.setDirty(!0),this.__renderingControl.startRenderingLoop()}.bind(this));this.__sphericalViewportControl.addListener("wheelScrollWithShiftKey",function(a,b){this.setDirty(!0);this.$Asset3dTurntableCameraControl15=null;var c=this.__camera.position.length();a>0?c<this.$Asset3dTurntableCameraControl7&&(this.$Asset3dTurntableCameraControl16((1-1/m)*b.x,(1/m-1)*b.y),this.__camera.position.divideScalar(m),this.$Asset3dTurntableCameraControl1.position.divideScalar(m),this.$Asset3dTurntableCameraControl2.position.divideScalar(m)):a<0&&(c>this.$Asset3dTurntableCameraControl6&&(this.$Asset3dTurntableCameraControl16((1-m)*b.x,(m-1)*b.y),this.__camera.position.multiplyScalar(m),this.$Asset3dTurntableCameraControl1.position.multiplyScalar(m),this.$Asset3dTurntableCameraControl2.position.multiplyScalar(m)))}.bind(this));this.__sphericalViewportControl.addListener("panningWithRightMouse",function(a){this.$Asset3dTurntableCameraControl16(-a.x,a.y),this.setDirty(!0),this.$Asset3dTurntableCameraControl15=null}.bind(this));this.__sphericalViewportControl.addListener("updateViewportMoveStart",function(a){this.$Asset3dTurntableCameraControl15=null}.bind(this));this.__sphericalViewportControl.addListener("updateViewportMove",function(a){this.$Asset3dTurntableCameraControl11.stop(),this.setDirty(!0)}.bind(this));this.__sphericalViewportControl.addListener("updateViewportEnd",function(a,c){this.$Asset3dTurntableCameraControl8=c,this.$Asset3dTurntableCameraControl9=a,this.$Asset3dTurntableCameraControl12===w.FOCUS_STATE&&(this.$Asset3dTurntableCameraControl12=w.FAKE_GYRO_AFTER_FOCUS,this.__sphericalViewportControl.setSphericalOrientation(b("radToDeg")(this.__yaw),b("radToDeg")(-this.__pitch)),this.__sphericalViewportControl.setAngularVelocityScaleFactor({x:1,y:1}),this.__sphericalViewportControl.reEnableGyro(),this.$Asset3dTurntableCameraControl10=!0),this.$Asset3dTurntableCameraControl17()}.bind(this));this.__sphericalViewportControl.addListener("onMovementStart",function(a){this.$Asset3dTurntableCameraControl15=null,this.$Asset3dTurntableCameraControl11.stop(),this.setDirty(!0),this.$Asset3dTurntableCameraControl12!==w.FOCUS_STATE&&(this.$Asset3dTurntableCameraControl12=w.FOCUS_STATE,this.__sphericalViewportControl.setAngularVelocityScaleFactor({x:u,y:v}))}.bind(this))};a.prototype.modelLoad=function(a,c){__p&&__p();c===void 0;this.setDirty(!0);c=null;var d=null;a.traverse(function(a){a.name==="FB_Post_Camera"?c=a:a.name==="FB_Post_Target"&&(d=a)});if(c&&d){c.updateMatrixWorld();d.updateMatrixWorld();var e=new(b("SocialVRThreeJS").Vector3)().setFromMatrixPosition(c.matrixWorld),f=new(b("SocialVRThreeJS").Vector3)().setFromMatrixPosition(d.matrixWorld);this.__cameraTarget.copy(f);this.__camera.near=c.near;this.__camera.far=c.far;this.__camera.fov=c.fov;e.sub(f);f=e.length();e.normalize();var g=Math.asin(e.y);e=Math.atan2(e.x,e.z);this.__sphericalViewportControl.setRelativeSphericalOrientation(b("radToDeg")(e),b("radToDeg")(g))}else{e=new(b("SocialVRThreeJS").Box3)().setFromObject(a);g=new(b("SocialVRThreeJS").Vector3)();a=e.getSize(g).length();e.getCenter(this.__cameraTarget);this.__camera.near=a*k;this.__camera.far=a*l;this.__camera.aspect=1;f=a*j}this.$Asset3dTurntableCameraControl6=n*f;this.$Asset3dTurntableCameraControl7=o*f;this.$Asset3dTurntableCameraControl5.position.copy(this.__cameraTarget);this.__camera.position.set(0,0,f);this.$Asset3dTurntableCameraControl2.position.y=2*f*Math.tan(b("degToRad")(this.__camera.fov*.5));this.$Asset3dTurntableCameraControl1.position.x=this.$Asset3dTurntableCameraControl2.position.y*this.__camera.aspect;this.$Asset3dTurntableCameraControl5.add(this.$Asset3dTurntableCameraControl1);this.$Asset3dTurntableCameraControl5.add(this.$Asset3dTurntableCameraControl2);this.__camera.updateProjectionMatrix();this.__initialOrientation=this.__sphericalViewportControl.getOrientation();this.__cameraInitialTarget=this.__cameraTarget.clone();this.__cameraInitialPosition=this.__camera.position.clone();this.$Asset3dTurntableCameraControl14=this.$Asset3dTurntableCameraControl2.position.y;this.$Asset3dTurntableCameraControl13=this.$Asset3dTurntableCameraControl1.position.x};a.prototype.update=function(a){if(!this.isDirty())return;a=h+i*(1-a);a=this.__pitch+a;var b=-this.__yaw,c=-.001*Math.cos(a)*Math.cos(b),d=.001*Math.sin(a);a=-.001*Math.cos(a)*Math.sin(b);this.$Asset3dTurntableCameraControl5.position.set(c+this.__cameraTarget.x,d+this.__cameraTarget.y,a+this.__cameraTarget.z);this.$Asset3dTurntableCameraControl5.lookAt(this.__cameraTarget)};a.prototype.$Asset3dTurntableCameraControl16=function(a,b){__p&&__p();var c=this.$Asset3dTurntableCameraControl3,d=this.$Asset3dTurntableCameraControl4;c.set(0,0,0);this.$Asset3dTurntableCameraControl5.updateMatrixWorld();d.setFromMatrixPosition(this.$Asset3dTurntableCameraControl1.matrixWorld);d.sub(this.__cameraTarget);c.addScaledVector(d,a);d.setFromMatrixPosition(this.$Asset3dTurntableCameraControl2.matrixWorld);d.sub(this.__cameraTarget);c.addScaledVector(d,b);this.__cameraTarget.add(c);this.$Asset3dTurntableCameraControl5.position.add(c)};a.prototype.$Asset3dTurntableCameraControl17=function(){this.$Asset3dTurntableCameraControl12===w.FAKE_GYRO_INITIAL&&this.$Asset3dTurntableCameraControl11.start(function(a,c){this.setDirty(!0);c=b("Tween").scale(this.$Asset3dTurntableCameraControl9,this.__initialOrientation.x,a);a=b("Tween").scale(this.$Asset3dTurntableCameraControl8,this.__initialOrientation.y,a);this.__sphericalViewportControl.setSphericalOrientation(c,a)}.bind(this),2e3,b("Ease").makePowerIn(3))};a.prototype.resetCamera=function(){this.$Asset3dTurntableCameraControl15||(this.$Asset3dTurntableCameraControl15=b("requestAnimationFrame")(this.__updateResetCamera))};a.prototype.destroy=function(){g.destroy.call(this),this.$Asset3dTurntableCameraControl11.stop,this.__sphericalViewportControl&&this.__sphericalViewportControl.destroy()};a.prototype.resizeCanvas=function(a,b){this.__sphericalViewportControl&&this.__sphericalViewportControl.updateViewportClientSize({width:a,height:b})};e.exports=a}),null);
__d("Photo3dCameraControl",["Asset3dCameraControl","EventListener","Random","SocialVRThreeJS","degToRad","getElementRect","performanceNow","radToDeg"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=.12,i=.06,j=.925,k=.92,l=.508015513,m=.666488587,n=Object.freeze({h_photo:-.14,v_photo:-.124}),o=Object.freeze({h_photo:-.124,v_photo:-.112}),p=Object.freeze({h_photo:.112,v_photo:.12}),q=Object.freeze({h_photo:.12,v_photo:.112}),r=Object.freeze({h_photo:.7,v_photo:.6}),s=Object.freeze({h_photo:.6,v_photo:.7}),t=Object.freeze({h_photo:.96,v_photo:.8}),u=Object.freeze({h_photo:.8,v_photo:.96}),v=.01,w=1,x=.005,y=.1,z=.001,A=.4,B=.3,C=3e-4,D=6e-4,E=D/1700,F=b("degToRad")(.1),G=b("degToRad")(179.9);c=babelHelpers.inherits(a,b("Asset3dCameraControl"));g=c&&c.prototype;function a(a,c,d,e,f,h){__p&&__p();f===void 0&&(f=!1),g.constructor.call(this,a,c,e,f,h),this.$Photo3dCameraControl1=!1,this.$Photo3dCameraControl2=0,this.$Photo3dCameraControl3=0,this.$Photo3dCameraControl4=0,this.$Photo3dCameraControl5=0,this.$Photo3dCameraControl6=b("Random").random()<.5,this.$Photo3dCameraControl14=null,this.$Photo3dCameraControl21=function(a){this.setDirty(!0,!0);var b=Math.max(Math.min(x*(a-this.$Photo3dCameraControl15),1),0);this.$Photo3dCameraControl15=a;this.$Photo3dCameraControl2+=b*(this.$Photo3dCameraControl4-this.$Photo3dCameraControl2);this.$Photo3dCameraControl3+=b*(this.$Photo3dCameraControl5-this.$Photo3dCameraControl3);Math.abs(this.$Photo3dCameraControl2-this.$Photo3dCameraControl4)>z||Math.abs(this.$Photo3dCameraControl3-this.$Photo3dCameraControl5)>z?this.$Photo3dCameraControl14=requestAnimationFrame(this.$Photo3dCameraControl21):this.$Photo3dCameraControl14=null}.bind(this),this.$Photo3dCameraControl26=function(a){__p&&__p();if(!this.__isInAttractMode)return;var b=a-this.$Photo3dCameraControl19;this.$Photo3dCameraControl19=a;a=A-this.$Photo3dCameraControl16;var c=Math.abs(a)<B;this.$Photo3dCameraControl16+=Math.min(C*b,.99)*a;if(c){a=this.$Photo3dCameraControl18+E*b;a<D&&(this.$Photo3dCameraControl18=a);if(this.$Photo3dCameraControl6){this.$Photo3dCameraControl17+=this.$Photo3dCameraControl18*b;while(this.$Photo3dCameraControl17>Math.PI)this.$Photo3dCameraControl17-=2*Math.PI}else{this.$Photo3dCameraControl17-=this.$Photo3dCameraControl18*b;while(this.$Photo3dCameraControl17<-Math.PI)this.$Photo3dCameraControl17+=2*Math.PI}}this.$Photo3dCameraControl2=this.$Photo3dCameraControl16*Math.cos(this.$Photo3dCameraControl17);this.$Photo3dCameraControl3=this.$Photo3dCameraControl16*Math.sin(this.$Photo3dCameraControl17);this.setDirty(!0,!1);this.__renderingControl.update();this.__attractModeAnimationFrameID=requestAnimationFrame(this.$Photo3dCameraControl26)}.bind(this),this.__camera.name="2.5D Photo Camera",d.add(this.__camera),this.$Photo3dCameraControl12=f}a.prototype.setupViewportListeners=function(){__p&&__p();b("EventListener").listen(this.__canvas,"mousemove",function(a){__p&&__p();var c=a.clientX;a=a.clientY;var d=b("getElementRect")(this.__canvas);if(c>d.left&&c<d.right&&a>d.top&&a<d.bottom){var e=.5*(d.left+d.right),f=.5*(d.top+d.bottom);this.$Photo3dCameraControl4=2*(c-e)/d.width;this.$Photo3dCameraControl5=-2*(a-f)/d.height;this.$Photo3dCameraControl1=!0;this.$Photo3dCameraControl20();this.__renderingControl.startRenderingLoop()}}.bind(this))};a.prototype.$Photo3dCameraControl20=function(){this.$Photo3dCameraControl14||(this.$Photo3dCameraControl15=b("performanceNow")(),this.$Photo3dCameraControl14=requestAnimationFrame(this.$Photo3dCameraControl21))};a.prototype.modelLoad=function(a,c){__p&&__p();c===void 0&&(c=null);this.setDirty(!0);c&&c.FB_PHOTO_3D_DATA?(this.__hFov=Math.min(Math.max(c.FB_PHOTO_3D_DATA.hFov,F),G),this.__vFov=Math.min(Math.max(c.FB_PHOTO_3D_DATA.vFov,F),G)):(this.__hFov=l,this.__vFov=m);this.$Photo3dCameraControl13=this.__hFov>this.__vFov?"h_photo":"v_photo";this.__aspectRatio=Math.tan(this.__hFov/2)/Math.tan(this.__vFov/2);this.__camera.aspect=this.__aspectRatio;c=new(b("SocialVRThreeJS").Box3)().setFromObject(a);this.__camera.near=Math.max(-1-c.max.z,v);c.expandByPoint(new(b("SocialVRThreeJS").Vector3)(0,0,y));a=new(b("SocialVRThreeJS").Vector3)();this.__camera.far=c.getSize(a).length();this.__cameraTarget.set(0,0,-w);this.__camera.position.set(0,0,0);this.__camera.fov=this.$Photo3dCameraControl12?b("radToDeg")(this.__vFov)*k:b("radToDeg")(this.__vFov)*j;this.__camera.updateProjectionMatrix();this.$Photo3dCameraControl8=Math.tan(this.__hFov/2)*w*this.$Photo3dCameraControl22();this.$Photo3dCameraControl9=Math.tan(this.__vFov/2)*w*this.$Photo3dCameraControl23();this.$Photo3dCameraControl10=this.$Photo3dCameraControl24();this.$Photo3dCameraControl11=this.$Photo3dCameraControl25()};a.prototype.$Photo3dCameraControl22=function(){return this.$Photo3dCameraControl12?p[this.$Photo3dCameraControl13]:n[this.$Photo3dCameraControl13]};a.prototype.$Photo3dCameraControl23=function(){return this.$Photo3dCameraControl12?q[this.$Photo3dCameraControl13]:o[this.$Photo3dCameraControl13]};a.prototype.$Photo3dCameraControl24=function(){return this.$Photo3dCameraControl12?t[this.$Photo3dCameraControl13]:r[this.$Photo3dCameraControl13]};a.prototype.$Photo3dCameraControl25=function(){return this.$Photo3dCameraControl12?u[this.$Photo3dCameraControl13]:s[this.$Photo3dCameraControl13]};a.prototype.update=function(a){__p&&__p();if(!this.isDirty())return;var b=this.__vFov*h*(2*a-1),c=(1-2*a)*this.$Photo3dCameraControl9,d=Math.sin(this.$Photo3dCameraControl3*Math.PI*.5),e=Math.sin(this.$Photo3dCameraControl2*Math.PI*.5),f=this.__vFov*i*d,g=this.__hFov*i*e;d=-d*this.$Photo3dCameraControl9;e=-e*this.$Photo3dCameraControl8;a=Math.pow(a+.16,3)/(Math.pow(a+.16,3)+Math.pow(1-(a+.16),3))-.9;f=-(f+b);b=-g;g=w-a*y;this.__cameraTarget.set(-((1-this.$Photo3dCameraControl10)*e),-(this.$Photo3dCameraControl11*c+(1-this.$Photo3dCameraControl11)*d),-w);this.__camera.position.set(0+g*Math.cos(f)*Math.sin(b),0+g*Math.sin(f),-w+g*Math.cos(f)*Math.cos(b));this.__camera.lookAt(this.__cameraTarget);this.__camera.lookAtPosition=this.__cameraTarget};a.prototype.__exitAttractMode=function(){g.__exitAttractMode.call(this),this.$Photo3dCameraControl4=this.$Photo3dCameraControl2,this.$Photo3dCameraControl5=this.$Photo3dCameraControl3};a.prototype.__enterAttractMode=function(){g.__enterAttractMode.call(this);this.$Photo3dCameraControl14!==null&&(cancelAnimationFrame(this.$Photo3dCameraControl14),this.$Photo3dCameraControl14=null);var a=this.$Photo3dCameraControl2,c=this.$Photo3dCameraControl3;this.$Photo3dCameraControl16=Math.sqrt(a*a+c*c);this.$Photo3dCameraControl17=Math.atan2(c,a);this.$Photo3dCameraControl18=0;this.$Photo3dCameraControl19=b("performanceNow")();this.__attractModeAnimationFrameID||(this.__attractModeAnimationFrameID=requestAnimationFrame(this.$Photo3dCameraControl26))};e.exports=a}),null);
__d("Asset3dRenderManager",["invariant","Asset3DCategory","Asset3dThreeJsHelpers","Asset3dTurntableCameraControl","Asset3dVrRenderer","FixedSizedSceneRenderer","Photo3dCameraControl","SocialVRThreeJS","WebVrDeviceManager","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=new(b("FixedSizedSceneRenderer"))();function a(a,b,c,d,e,f,g,h,i,j,k){this.$6=a,this.$7=b,this.$1=c,this.$2=d,this.$3=e,this.$4=f,this.$8=g,this.$9=h,this.$5=i,this.$11=!0,this.$10=j,this.$12=k}a.prototype.onModelLoad=function(a,c,d){d&&this.$2&&this.$3&&(this.$4.logNetworkLoadEvents(d,this.$2,this.$3),this.$4.logGlbParsingEvents(d)),this.userData=c,b("Asset3dThreeJsHelpers").onModelLoad(a),this.model=a,this.$13(),h.isValid()?(this.$14(),this.$15(),this.$16()):this.$10()};a.prototype.$13=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.$6,this.canvas.height=this.$7,this.context=this.canvas.getContext("2d")};a.prototype.$15=function(){this.scene&&this.canvas||g(0,549),this.cameraControl=this.$1===b("Asset3DCategory").PHOTOS_3D?new(b("Photo3dCameraControl"))(this.$6,this.$7,this.scene,this.canvas,this.$5,this.$12):new(b("Asset3dTurntableCameraControl"))(this.$6,this.$7,this.scene,this.canvas,this.$5,this.$12),this.cameraControl.modelLoad(this.model,this.userData)};a.prototype.$14=function(){__p&&__p();this.model||g(0,550);this.scene=new(b("SocialVRThreeJS").Scene)();this.scene.add(this.model);if(b("gkx")("678198")&&this.$17(this.scene))new(b("SocialVRThreeJS").TextureLoader)().load("/images/asset3d/iblenv_b20_02n-30.jpg",function(a){a.mapping=b("SocialVRThreeJS").CubeUVReflectionMapping,a.minFilter=b("SocialVRThreeJS").LinearFilter,a.magFilter=b("SocialVRThreeJS").LinearFilter,this.scene.traverse(function(b){b.material&&b.material.type=="MeshStandardMaterial"&&(b.material.envMap=a,b.material.envMapIntensity=1.5,b.material.needsUpdate=!0)})}.bind(this));else{var a=new(b("SocialVRThreeJS").AmbientLight)(13421772,.5);this.scene.add(a)}};a.prototype.$17=function(a){var b=!1;a.traverse(function(a){a=a.material;!b&&a&&a.isMeshStandardMaterial&&!(a.extensions&&a.extensions.KHR_materials_unlit!=null)&&(b=!0)});return b};a.prototype.isValid=function(){return this.$11};a.prototype.disposeModel=function(){var a=this.model.clone();this.scene.remove(this.model);b("Asset3dThreeJsHelpers").disposeModel(this.model);this.model=a;this.scene.add(this.model)};a.prototype.$16=function(){this.$8&&(window.asset3dVrRenderer||(this.$9||g(0,551),window.asset3dVrRenderer=new(b("Asset3dVrRenderer"))({canvas2DWidth:this.$6*2,canvas2DHeight:this.$7,photoViewerProps:this.$9})),this.vrRenderer=window.asset3dVrRenderer)};a.prototype.destroy=function(){this.cameraControl&&this.cameraControl.destroy(),this.model&&this.disposeModel()};a.prototype.renderAsset3D=function(a){a===void 0&&(a=!0);var c=this.context,d=this.cameraControl;h&&h.isValid()&&c&&d&&d.isDirty()&&!b("WebVrDeviceManager").getInstance().inVr()&&(a&&d.setDirty(!1),h.render(c,this.scene,d.camera(),{width:this.$6,height:this.$7,pixelRatio:window.devicePixelRatio}))};a.prototype.getEl=function(){return this.canvas};a.prototype.resize=function(a,b){this.cameraControl.resize(a,b),this.$5||(this.canvas.width=a,this.canvas.height=b),this.cameraControl.setDirty(!0,!0)};e.exports=a}),null);
__d("Asset3dScrollTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=60,h=500;function a(){this.$1=new Array(h).fill({pos:0,time:0}),this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$7=0,this.$8=0}a.prototype.$9=function(){this.$4>0&&(this.$5-=this.$1[this.$2].pos,this.$2=(this.$2+1)%h,this.$4-=1)};a.prototype.$10=function(a,b){this.$1[this.$3]={pos:a,time:b},this.$5+=a,this.$3=(this.$3+1)%h,this.$4<h?this.$4+=1:(this.$5-=this.$1[this.$2].pos,this.$2=(this.$2+1)%h)};a.prototype.$11=function(){this.$2=0,this.$3=0,this.$4=0,this.$5=0};a.prototype.onScroll=function(a,c){this.$6=a,c&&(this.$7=a,this.$8=b("performanceNow")())};a.prototype.samplePosition=function(){var a=b("performanceNow")(),c=Math.max(a-this.$8,0);this.$7=this.$6+(this.$7-this.$6)*Math.exp(-c*.01);this.$8=a;while(this.$4>0&&a-this.$1[this.$2].time>g)this.$9();this.$10(this.$7,a);return this.$5/this.$4};e.exports=a}),null);
__d("GltfScenePerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setActiveDurationMs=function(a){this.$1.active_duration_ms=a;return this};a.prototype.setAsset3dID=function(a){this.$1.asset3d_id=a;return this};a.prototype.setCompressionLevel=function(a){this.$1.compression_level=a;return this};a.prototype.setCompressionType=function(a){this.$1.compression_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setGltfSceneAvgRenderFrameRate=function(a){this.$1.gltf_scene_avg_render_frame_rate=a;return this};a.prototype.setSceneURL=function(a){this.$1.scene_url=a;return this};a.prototype.setStartTimeMs=function(a){this.$1.start_time_ms=a;return this};a.prototype.setStoryID=function(a){this.$1.story_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={active_duration_ms:!0,asset3d_id:!0,compression_level:!0,compression_type:!0,event:!0,gltf_scene_avg_render_frame_rate:!0,scene_url:!0,start_time_ms:!0,story_id:!0,vc:!0};e.exports=a}),null);
__d("GLTFSceneLoggerUtils",["GLTFSceneLogEvents","GltfScenePerformanceTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){this.data={frameCount:0,timeSinceLastFPSLogMs:0,touchPanStartMs:0,fakeGyroStartMs:0},this.$1={asset3dID:a,sceneURL:b,storyTimelineID:c}}a.prototype.logNetworkLoadEvents=function(a,c,d){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_NETWORK_LOAD_START,{startTimeMs:a.networkLoad.startTimeMs}),this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_NETWORK_LOAD_END,{activeDurationMs:a.networkLoad.durationMs,compressor:c,compressionLevel:d})};a.prototype.logGpuUploadStart=function(){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_GPU_UPLOAD_START)};a.prototype.logGpuUploadEnd=function(a){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_GPU_UPLOAD_END,{activeDurationMs:a})};a.prototype.logAverageFrameRate=function(a){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_AVG_RENDER_FRAME_RATE,{averageFrameRate:a})};a.prototype.logGlbParsingEvents=function(a){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_GLB_PARSING_START,{startTimeMs:a.glbParsing.startTimeMs}),this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_GLB_PARSING_END,{activeDurationMs:a.glbParsing.durationMs})};a.prototype.logOnTouchPanEnd=function(a){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_ON_TOUCH_PAN_END,{activeDurationMs:a})};a.prototype.logOnFakeGyroEnd=function(a){if(a<1e3)return;this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_ON_FAKE_GYRO_END_WWW,{activeDurationMs:a})};a.prototype.logOnWebVrRequestEnter=function(){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_WEB_VR_REQUEST_ENTER,{})};a.prototype.logOnWebVrStart=function(){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_WEB_VR_START,{})};a.prototype.logOnWebVrEnd=function(a){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_WEB_VR_END,{activeDurationMs:a})};a.prototype.logViewportSizeError=function(){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_VIEWPORT_SIZE_ERROR)};a.prototype.$2=function(a,c){c===void 0&&(c={});a=new(b("GltfScenePerformanceTypedLogger"))().setEvent(a).setAsset3dID(this.$1.asset3dID).setSceneURL(this.$1.sceneURL).setActiveDurationMs(c.activeDurationMs).setStartTimeMs(c.startTimeMs).setGltfSceneAvgRenderFrameRate(c.averageFrameRate);this.$1.storyTimelineID&&a.setStoryID(this.$1.storyTimelineID);a.log()};e.exports=a}),null);
__d("SphericalMediaMouseOverlay.react",["cx","fbt","CSS","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=800,k=function(a){return{mouseRoot:"_3bxe _2660"+(a?" _2dz7":""),mouse:"_2661"+(a?" _2dz7":""),mouseRotate:"_2663"+(a?" _2dz7":""),mouseInner:"_2664"+(a?" _2dz7":""),mouseLeftButton:"_2666"+(a?" _2dz7":""),mouseBackground:"_15nj",mouseButtons:"_2665",mouseRightButton:"_2667",mouseBody:"_266m",mouseText:"_2662"}};c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$2=null,b}a.prototype.componentDidUpdate=function(a){a.isActive&&!this.props.isActive?this.$2=setTimeout(function(){return this.$3()}.bind(this),j):!this.props.isActive?this.$3():this.props.isActive&&(this.$2!==null&&(clearTimeout(this.$2),this.$2=null),this.$4())};a.prototype.componentDidMount=function(){this.props.isActive||this.$3();var a=b("ReactDOM").findDOMNode(this);a instanceof HTMLElement&&(this.$1=a)};a.prototype.componentWillUnmount=function(){this.$1=null};a.prototype.$3=function(){this.$1&&b("CSS").addClass(this.$1,"_8b2")};a.prototype.$4=function(){this.$1&&b("CSS").removeClass(this.$1,"_8b2")};a.prototype.render=function(){var a=this.props,c=a.className;a=a.isActive;var d=this.props.copy?this.props.copy:h._("Haz clic y arrastra para mirar alrededor");a=k(a);return b("React").createElement("div",{className:b("joinClasses")(c,a.mouseRoot)},b("React").createElement("div",{className:a.mouse},b("React").createElement("div",{className:a.mouseRotate},b("React").createElement("div",{className:a.mouseInner},b("React").createElement("div",{className:a.mouseBackground}),b("React").createElement("div",{className:a.mouseButtons},b("React").createElement("div",{className:a.mouseLeftButton}),b("React").createElement("div",{className:a.mouseRightButton})),b("React").createElement("div",{className:a.mouseBody})))),b("React").createElement("div",{className:a.mouseText},d))};e.exports=a}),null);
__d("Asset3dFeedViewer.react",["ix","csx","cx","fbt","invariant","Animation","Asset3DBackground","Asset3DBackgroundSize","Asset3DCategory","Asset3dComponentContextMenu.react","Asset3dFeedViewerModalContainer.react","Asset3DFullscreenViewContainer.react","Asset3dRenderManager","Asset3dScrollTracker","ImmersiveMediaOverlay.react","Asset3DLoaderFactory","Asset3DUtils","CSS","DOM","DOMQuery","EventListener","GLTFSceneLoggerUtils","Image.react","Link.react","React","ReactDOM","ScaledImage.react","SphericalMediaMouseOverlay.react","SubscriptionsHandler","URI","WebVrContainer.react","WebVrDeviceManager","XUIAmbientNUX.react","asset","getElementRect","gkx","onViewportChanged","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m=b("Asset3DLoaderFactory").make("Asset3DLoader"),n=360,o=.9,p=10,q=20,r=4e3,s=300,t={DISABLED:"0",DEV:"1"},u=j._("Click and drag to look around in 3D"),v=j._("Move your mouse to view the photo in 3D"),w=j._("People who can see your 3D post will be able to take photos with it in AR Camera and share on and off Facebook."),x=function(a){a=!!a.composerID||!!a.attribution;return{sphericalOverlay:a?"_1r1y":""}};function y(a){return a.isVisible?b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"right",contextRef:a.contextRef,shown:!0,position:"above",width:"custom",onCloseButtonClick:a.onCloseButtonClick,customwidth:a.width},w):null}var z=.6;function A(a){var c=a.fps;c=c===void 0?0:c;return a.isVisible?b("React").createElement("ul",{className:"_6a-z"},b("React").createElement("li",{className:"_6a--"},b("React").createElement("span",null,"AssetID: ",a.asset3dID)),b("React").createElement("li",{className:"_6a--"},b("React").createElement("span",null,"PostID: ",a.postID||"")),b("React").createElement("li",{className:"_6a--"},b("React").createElement("span",null,"FPS: ",(c||0).toFixed(2)))):null}function B(a){var c=a.fallbackImageURI,d=a.showErrorMsg,e=a.width;a=a.height;var f=j._("Your browser does not support 3D");if(c)return b("React").createElement("div",null,b("React").createElement(b("ScaledImage.react"),{width:e,height:a,imageSize:{height:a,width:e},src:c}),b("React").createElement("div",{className:"_3gss"},f));else{d(f);return b("React").createElement("div",null)}}c=babelHelpers.inherits(a,b("React").Component);l=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=l.constructor).call.apply(a,[this].concat(e)),this.state={isNuxActive:!1,isSceneRendered:!1,isTooltipDisabled:!1,fps:0,debugMode:null,width:0,height:0,isRenderContextValid:!0,showModal:!1,modalSize:{width:1,height:1}},this.$5=!0,this.$6=null,this.$9=0,this.$10=!1,this.$11=0,this.$12=0,this.$13=null,this.$18=null,this.$19=new(b("SubscriptionsHandler"))(),this.$20=!1,this.$26=function(a){var c=b("DOMQuery").find(this.props.initialViewContainer,"._623o");b("CSS").setClass(c,"_3gsr");c=b("DOM").create("div",{className:"_3gss"});b("DOM").setContent(c,a);b("DOM").appendContent(this.props.initialViewContainer,c)}.bind(this),this.$29=function(){this.setState({isRenderContextValid:!1})}.bind(this),this.onRequestAnimationFrame=function(){if(this.$4){var a=this.update();a&&(this.$6=window.requestAnimationFrame(this.onRequestAnimationFrame));this.$20=a}}.bind(this),this.$43=function(){var a=Math.min(this.$12/(s/1e3),60);this.setState({fps:a});this.$12=0;this.$13=window.setTimeout(this.$43,s)}.bind(this),this.$33=function(a){__p&&__p();if(!this.$2)return;var c=!0,d=!0,e=b("getElementRect")(this.$2),f=a.top;a=a.bottom;c=e.top>f&&e.top<a||e.bottom>f&&e.bottom<a||f>e.top&&a<e.bottom;d=e.top>f&&e.bottom<a;c&&(this.$44(e),this.$15.cameraControl.setDirty(!0,!0));this.$15.cameraControl.setFullVisibility(d);this.$4!==c&&(this.$4=c,c?this.$39():this.$41());this.$30()}.bind(this),c}a.prototype.componentDidMount=function(){__p&&__p();this.$1&&this.$1.setIsClientReady(!0);this.$4=!1;this.$16=this.$21.bind(this);this.$22();this.$23(this.props);if(this.$2){this.$19.addSubscriptions(b("EventListener").listen(this.$2,"contextmenu",function(a){(a.shiftKey||!b("gkx")("678197"))&&a.preventDefault()}));var a=null;if(this.props.category===b("Asset3DCategory").PHOTOS_3D){var c=this.props.storyTimelineID;a=new(b("URI"))("/intern/compphoto/x3d/3dphoto_console").setDomain("our.intern.facebook.com").setProtocol("https").addQueryData({post_id:c}).toString()}if(this.$2 instanceof HTMLElement){c=b("React").createElement(b("Asset3dComponentContextMenu.react"),{target:this.$2,fileURL:this.props.glbURI,fallbackImgURL:this.props.originalImageURI,consoleURL:a,onToggleDevPanel:function(){return this.$24()}.bind(this)});b("ReactDOM").render(c,this.$2)}}};a.prototype.componentWillUnmount=function(){this.$25()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.glbURI&&a.glbURI!==this.props.glbURI&&(this.$4=!1,this.$5=!0,this.$25(),this.$23(a))};a.prototype.$23=function(a){var b=a.glbURI,c=a.asset3dID,d=a.actorID;a=a.statusID;return m.load({uri:b,assetID:c,statusID:a,actorID:d}).then(function(a){a.error?this.$26(j._("3D post failed to load")):this.$27(a)}.bind(this))};a.prototype.$22=function(){__p&&__p();var a=this.props,c=a.width,d=a.height;a=a.initialViewContainer;var e=c;d=d;c===1&&(e=a.clientWidth,d=a.clientHeight);this.setState({width:e,height:d});c=this.props.vrProps;this.$15=new(b("Asset3dRenderManager"))(e,d,this.props.category,this.props.compressor,this.props.compressionLevel,this.$7,this.$28(),c!==void 0&&c!==null?c.photoViewerProps:null,this.props.isModal,this.$29,{startRenderingLoop:function(){return this.$30()}.bind(this),update:function(){return this.update()}.bind(this)})};a.prototype.$28=function(){return this.props.enable3DPhotoWebVRSupport&&this.props.category===b("Asset3DCategory").PHOTOS_3D||this.props.enable3DModelWebVRSupport&&this.props.category!==b("Asset3DCategory").PHOTOS_3D};a.prototype.$30=function(){this.$20||(this.$20=!0,this.onRequestAnimationFrame())};a.prototype.$27=function(a){__p&&__p();var c=this.$2,d=this.props.storyTimelineID,e=a.assetID,f=a.uri;if(!f||!c)return;this.$15.onModelLoad(a.scene,a.userData,a.performanceInfo);this.$7=new(b("GLTFSceneLoggerUtils"))(e,f,d);this.$10=!1;this.$9=0;this.$17=new(b("Asset3dScrollTracker"))();this.$18=null;if(!c)return;this.$3=this.$15.canvas;c.appendChild(this.$3);this.$19.addSubscriptions(b("EventListener").listen(this.$3,"mousemove",function(a){if(this.$10)return;this.$9+=1;this.$9>q&&(this.$10=!0,this.setState({isNuxActive:!0}),this.$18=window.setTimeout(function(){this.setState({isNuxActive:!1})}.bind(this),r))}.bind(this)),b("EventListener").listen(this.$3,"dblclick",function(a){this.$15.cameraControl.resetCamera()}.bind(this)));(!this.props.isModal&&this.props.category===b("Asset3DCategory").PHOTOS_3D||this.props.category===b("Asset3DCategory").COMPOSER&&b("gkx")("693522"))&&(b("EventListener").listen(this.$3,"click",function(a){this.$31()}.bind(this)),b("EventListener").listen(this.$3,"DOM/click",function(a){this.$31()}.bind(this)));a=Date.now();this.$7.logGpuUploadStart();this.$8=.5;this.$32(!1);this.$7.logGpuUploadEnd(Date.now()-a);e=this.$15.getEl();f=this.$15;if(this.props.shouldUpdateFallbackImage&&e&&f){d=b("Asset3DUtils").takeScreenshot(e);b("Asset3DUtils").saveScreenshot(d,this.props.asset3dID,this.props.actorID)}c=b("onViewportChanged")(this.$33);c.scheduleCheck();this.$14=c};a.prototype.$31=function(){var a=this.$34();this.setState({modalSize:a,showModal:!0})};a.prototype.$25=function(){this.$15&&this.$15.destroy(),this.$6!=null&&(window.cancelAnimationFrame(this.$6),this.$6=null),this.$18&&(window.clearTimeout(this.$18),this.$18=null),this.$19&&this.$19.release(),this.$35(),this.$2&&this.$3&&this.$3.parentNode===this.$2&&this.$2.removeChild(this.$3)};a.prototype.$32=function(a){this.$15.cameraControl.update(this.$8);var b=this.$15.cameraControl.isDirty();this.$15.renderAsset3D(a);return b};a.prototype.$36=function(){var a=this.$1;a||k(0,10952);var b=this.$15.vrRenderer;b||k(0,10950);a.setVrOn(b.domElement());window.cancelAnimationFrame(this.$6);this.$6=null};a.prototype.$37=function(){var a=this.$1;a||k(0,10951);a.setVrOff();this.$15.cameraControl.setDirty(!0,!0);this.$6=window.requestAnimationFrame(this.onRequestAnimationFrame)};a.prototype.$38=function(){new(b("Animation"))(this.props.initialViewContainer).to("opacity",0).duration(350).hide().go()};a.prototype.$39=function(){if(this.$5){this.props.isModal||this.$38();var a=b("DOMQuery").scry(b("ReactDOM").findDOMNode(this),"._3xkn")[0];a&&new(b("Animation"))(a).to("opacity",1).duration(700).go();this.$5=!1}this.$15.vrRenderer&&b("WebVrDeviceManager").getInstance().addDeviceReadyListner(this.$16);this.state.debugMode===t.DEV&&this.$40();window.requestAnimationFrame(this.onRequestAnimationFrame)};a.prototype.$41=function(){this.$15.disposeModel(),this.$15.vrRenderer&&b("WebVrDeviceManager").getInstance().removeDeviceReadyListner(this.$16),this.$35()};a.prototype.$21=function(a){var b=this.$1;b||k(0,11095);if(a!==null){a=a.getEyeParameters("left");b.setDeviceReady(!0,a.renderWidth,a.renderHeight)}else b.setDeviceReady(!1,0,0)};a.prototype.update=function(){if(this.$4){this.$42();var a=this.$32(!0);this.state.isSceneRendered||this.setState({isSceneRendered:!0});return a}return!1};a.prototype.$42=function(){if(this.props.isModal){this.$8=.5;return}var a=this.$17.samplePosition();Math.abs(a-this.$8)>.001&&(this.$8=a,this.$15.cameraControl.setDirty(!0,!1))};a.prototype.$34=function(){var a=window.innerWidth||document.documentElement.clientWidth,b=window.innerHeight||document.documentElement.clientHeight;a=o*Math.min(a-n-2*p,b*this.$15.cameraControl.aspectRatio());b=a/this.$15.cameraControl.aspectRatio();return{width:a,height:b}};a.prototype.$44=function(a){if(!this.$2)return;var b=window.innerHeight||document.documentElement.clientHeight,c=0;a.height>.5*b?c=a.bottom/(b+a.height):a.top<0?c=.25*a.bottom/a.height:a.bottom>b?c=.75+.25*(a.bottom-b)/a.height:c=.25+.5*a.top/(b-a.height);this.$17.onScroll(c,this.$5);this.$5&&(this.$8=c)};a.prototype.$24=function(){var a=this.state.debugMode,b=a===t.DEV?t.DISABLED:t.DEV;a===t.DEV?this.$35():this.$40();this.setState({debugMode:b})};a.prototype.$40=function(){this.$13||(this.$13=window.setTimeout(this.$43,s))};a.prototype.$35=function(){this.$13&&(window.clearTimeout(this.$13),this.$13=null)};a.prototype.$45=function(){};a.prototype.render=function(){__p&&__p();var a=this.props.attribution,c=a?function(){var c=a.href,d=a.source,e=a.title;return b("React").createElement("div",{className:"_3xkn"},b("React").createElement(b("Link.react"),{href:c,target:"_blank"},b("React").createElement(b("Image.react"),{className:"_47ru",src:g("459146")}),b("React").createElement("div",{className:"_47rt"},b("React").createElement("div",{className:"_72zk"},e),b("React").createElement("div",{className:"_377g"},d?d:c))))}():null,d={overflow:"hidden",position:"relative"};this.props.background&&this.props.background!==b("Asset3DBackground").DEFAULT&&(d=Object.assign(d,b("Asset3DUtils").getBackgroundStyles(this.props.background,b("Asset3DBackgroundSize").STORY)));var e=x(this.props),f={height:this.state.height},h=this.$28()?b("React").createElement(b("WebVrContainer.react"),{ref:function(a){return this.$1=a}.bind(this),enterVrCallback:function(){this.$7.logOnWebVrRequestEnter();this.props.vrProps||k(0,3400);var a=this.props.vrProps.storyProps;a||k(0,3401);a=this.$15.vrRenderer.createVrDeviceManagerProps(this.props.category,this.$15.cameraControl.camera(),this.$15.model,a,this.$15.userData,this.$7,this.$36.bind(this),this.$37.bind(this));b("promiseDone")(b("WebVrDeviceManager").getInstance().enterVr(a))}.bind(this),exitVrCallback:function(){b("promiseDone")(b("WebVrDeviceManager").getInstance().exitVr())},needsOverlay:c===null}):null,i=this.state.showModal?function(){var a=this.state.modalSize,c=this.$15.cameraControl.camera();c.lookAtPosition=c.lookAtPosition;if(this.props.category===b("Asset3DCategory").PHOTOS_3D)return b("React").createElement(b("Asset3dFeedViewerModalContainer.react"),{scene:this.$15.scene,camera:c,viewportInfo:{width:a.width,height:a.height,pixelRatio:1},asset3DInfo:{horizontalFov:this.$15.cameraControl.getHorizontalFov()||0,verticalFov:this.$15.cameraControl.getVerticalFov()||0},onExit:function(){this.setState({showModal:!1})}.bind(this),storyID:this.props.storyID});else return b("React").createElement(b("Asset3DFullscreenViewContainer.react"),{model:this.$15.scene,cameraPosition:c.position,viewportInfo:{width:a.width,height:a.height,pixelRatio:1},onExit:function(){this.setState({showModal:!1})}.bind(this),storyID:this.props.storyID,backgroundType:this.props.background})}.bind(this)():null;if(this.state.isRenderContextValid){var j=this.props.initialViewContainer;j.style.position="absolute";return b("React").createElement("div",null,i,b("React").createElement("div",{style:d,tabIndex:0},b("gkx")("764274")&&b("React").createElement(b("ImmersiveMediaOverlay.react"),{graphQLID:this.props.graphQLID}),b("React").createElement("div",{style:f,ref:function(a){return this.$2=a}.bind(this)}),b("React").createElement(b("SphericalMediaMouseOverlay.react"),{className:e.sphericalOverlay,isActive:this.state.isNuxActive,copy:this.props.category===b("Asset3DCategory").PHOTOS_3D?v:u}),b("React").createElement("div",{className:"_34-b",ref:"nuxAnchor"}),c,h,b("React").createElement(A,{isVisible:this.state.debugMode===t.DEV,fps:this.state.fps,asset3dID:this.props.asset3dID,postID:this.props.storyTimelineID}),b("React").createElement(y,{isVisible:b("gkx")("678199")&&this.props.composerID!==null&&this.state.isSceneRendered&&!this.state.isTooltipDisabled,width:this.state.width*z,text:w,onCloseButtonClick:function(){return this.setState({isTooltipDisabled:!0})}.bind(this),contextRef:function(){return this.refs.nuxAnchor}.bind(this)})))}else{this.props.fallbackImageURI&&this.$38();return b("React").createElement(B,{width:this.props.width,height:this.props.height,fallbackImageURI:this.props.fallbackImageURI,showErrorMsg:this.$26})}};a.defaultProps={storyTimelineID:null,storyID:null,statusID:null,glbURI:null,compressor:null,compressionLevel:null,attribution:null,height:1,width:1,composerID:null,background:null,enable3DModelWebVRSupport:!1,enable3DPhotoWebVRSupport:!1,shouldUpdateFallbackImage:!1,vrProps:null,fallbackImageURI:null,originalImageURI:null};e.exports=a}),null);